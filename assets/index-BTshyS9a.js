(function(){const t=document.createElement("link").relList;if(t&&t.supports&&t.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))i(s);new MutationObserver(s=>{for(const a of s)if(a.type==="childList")for(const l of a.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&i(l)}).observe(document,{childList:!0,subtree:!0});function n(s){const a={};return s.integrity&&(a.integrity=s.integrity),s.referrerPolicy&&(a.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?a.credentials="include":s.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function i(s){if(s.ep)return;s.ep=!0;const a=n(s);fetch(s.href,a)}})();const fa=!1,ha=(e,t)=>e===t,xn=Symbol("solid-proxy"),ma=typeof Proxy=="function",pa=Symbol("solid-track"),Ft={equals:ha};let qi=es;const Be=1,Mt=2,Ki={owned:null,cleanups:null,context:null,owner:null};var F=null;let dn=null,ba=null,J=null,be=null,Pe=null,Yt=0;function mt(e,t){const n=J,i=F,s=e.length===0,a=t===void 0?i:t,l=s?Ki:{owned:null,cleanups:null,context:a?a.context:null,owner:a},r=s?e:()=>e(()=>Te(()=>yt(l)));F=l,J=null;try{return Ue(r,!0)}finally{J=n,F=i}}function P(e,t){t=t?Object.assign({},Ft,t):Ft;const n={value:e,observers:null,observerSlots:null,comparator:t.equals||void 0},i=s=>(typeof s=="function"&&(s=s(n.value)),Qi(n,s));return[Xi.bind(n),i]}function L(e,t,n){const i=Rn(e,t,!1,Be);vt(i)}function Se(e,t,n){qi=_a;const i=Rn(e,t,!1,Be);i.user=!0,Pe?Pe.push(i):vt(i)}function G(e,t,n){n=n?Object.assign({},Ft,n):Ft;const i=Rn(e,t,!0,0);return i.observers=null,i.observerSlots=null,i.comparator=n.equals||void 0,vt(i),Xi.bind(i)}function ya(e){return Ue(e,!1)}function Te(e){if(J===null)return e();const t=J;J=null;try{return e()}finally{J=t}}function Pn(e,t,n){const i=Array.isArray(e);let s,a=n&&n.defer;return l=>{let r;if(i){r=Array(e.length);for(let g=0;g<e.length;g++)r[g]=e[g]()}else r=e();if(a)return a=!1,l;const u=Te(()=>t(r,s,l));return s=r,u}}function wa(e){Se(()=>Te(e))}function wt(e){return F===null||(F.cleanups===null?F.cleanups=[e]:F.cleanups.push(e)),e}function Vi(){return F}function Yi(e,t){const n=F,i=J;F=e,J=null;try{return Ue(t,!0)}catch(s){On(s)}finally{F=n,J=i}}function va(e){const t=J,n=F;return Promise.resolve().then(()=>{J=t,F=n;let i;return Ue(e,!1),J=F=null,i?i.done:void 0})}const[il,sl]=P(!1);function Ji(e,t){const n=Symbol("context");return{id:n,Provider:Ta(n),defaultValue:e}}function Zi(e){let t;return F&&F.context&&(t=F.context[e.id])!==void 0?t:e.defaultValue}function jn(e){const t=G(e),n=G(()=>Cn(t()));return n.toArray=()=>{const i=n();return Array.isArray(i)?i:i!=null?[i]:[]},n}function Xi(){if(this.sources&&this.state)if(this.state===Be)vt(this);else{const e=be;be=null,Ue(()=>qt(this),!1),be=e}if(J){const e=this.observers?this.observers.length:0;J.sources?(J.sources.push(this),J.sourceSlots.push(e)):(J.sources=[this],J.sourceSlots=[e]),this.observers?(this.observers.push(J),this.observerSlots.push(J.sources.length-1)):(this.observers=[J],this.observerSlots=[J.sources.length-1])}return this.value}function Qi(e,t,n){let i=e.value;return(!e.comparator||!e.comparator(i,t))&&(e.value=t,e.observers&&e.observers.length&&Ue(()=>{for(let s=0;s<e.observers.length;s+=1){const a=e.observers[s],l=dn&&dn.running;l&&dn.disposed.has(a),(l?!a.tState:!a.state)&&(a.pure?be.push(a):Pe.push(a),a.observers&&ts(a)),l||(a.state=Be)}if(be.length>1e6)throw be=[],new Error},!1)),t}function vt(e){if(!e.fn)return;yt(e);const t=Yt;Sa(e,e.value,t)}function Sa(e,t,n){let i;const s=F,a=J;J=F=e;try{i=e.fn(t)}catch(l){return e.pure&&(e.state=Be,e.owned&&e.owned.forEach(yt),e.owned=null),e.updatedAt=n+1,On(l)}finally{J=a,F=s}(!e.updatedAt||e.updatedAt<=n)&&(e.updatedAt!=null&&"observers"in e?Qi(e,i):e.value=i,e.updatedAt=n)}function Rn(e,t,n,i=Be,s){const a={fn:e,state:i,updatedAt:null,owned:null,sources:null,sourceSlots:null,cleanups:null,value:t,owner:F,context:F?F.context:null,pure:n};return F===null||F!==Ki&&(F.owned?F.owned.push(a):F.owned=[a]),a}function Ht(e){if(e.state===0)return;if(e.state===Mt)return qt(e);if(e.suspense&&Te(e.suspense.inFallback))return e.suspense.effects.push(e);const t=[e];for(;(e=e.owner)&&(!e.updatedAt||e.updatedAt<Yt);)e.state&&t.push(e);for(let n=t.length-1;n>=0;n--)if(e=t[n],e.state===Be)vt(e);else if(e.state===Mt){const i=be;be=null,Ue(()=>qt(e,t[0]),!1),be=i}}function Ue(e,t){if(be)return e();let n=!1;t||(be=[]),Pe?n=!0:Pe=[],Yt++;try{const i=e();return ka(n),i}catch(i){n||(Pe=null),be=null,On(i)}}function ka(e){if(be&&(es(be),be=null),e)return;const t=Pe;Pe=null,t.length&&Ue(()=>qi(t),!1)}function es(e){for(let t=0;t<e.length;t++)Ht(e[t])}function _a(e){let t,n=0;for(t=0;t<e.length;t++){const i=e[t];i.user?e[n++]=i:Ht(i)}for(t=0;t<n;t++)Ht(e[t])}function qt(e,t){e.state=0;for(let n=0;n<e.sources.length;n+=1){const i=e.sources[n];if(i.sources){const s=i.state;s===Be?i!==t&&(!i.updatedAt||i.updatedAt<Yt)&&Ht(i):s===Mt&&qt(i,t)}}}function ts(e){for(let t=0;t<e.observers.length;t+=1){const n=e.observers[t];n.state||(n.state=Mt,n.pure?be.push(n):Pe.push(n),n.observers&&ts(n))}}function yt(e){let t;if(e.sources)for(;e.sources.length;){const n=e.sources.pop(),i=e.sourceSlots.pop(),s=n.observers;if(s&&s.length){const a=s.pop(),l=n.observerSlots.pop();i<s.length&&(a.sourceSlots[l]=i,s[i]=a,n.observerSlots[i]=l)}}if(e.tOwned){for(t=e.tOwned.length-1;t>=0;t--)yt(e.tOwned[t]);delete e.tOwned}if(e.owned){for(t=e.owned.length-1;t>=0;t--)yt(e.owned[t]);e.owned=null}if(e.cleanups){for(t=e.cleanups.length-1;t>=0;t--)e.cleanups[t]();e.cleanups=null}e.state=0}function $a(e){return e instanceof Error?e:new Error(typeof e=="string"?e:"Unknown error",{cause:e})}function On(e,t=F){throw $a(e)}function Cn(e){if(typeof e=="function"&&!e.length)return Cn(e());if(Array.isArray(e)){const t=[];for(let n=0;n<e.length;n++){const i=Cn(e[n]);Array.isArray(i)?t.push.apply(t,i):t.push(i)}return t}return e}function Ta(e,t){return function(i){let s;return L(()=>s=Te(()=>(F.context={...F.context,[e]:i.value},jn(()=>i.children))),void 0),s}}const xa=Symbol("fallback");function ui(e){for(let t=0;t<e.length;t++)e[t]()}function Ca(e,t,n={}){let i=[],s=[],a=[],l=0,r=t.length>1?[]:null;return wt(()=>ui(a)),()=>{let u=e()||[],g=u.length,h,f;return u[pa],Te(()=>{let b,z,k,_,I,C,B,S,$;if(g===0)l!==0&&(ui(a),a=[],i=[],s=[],l=0,r&&(r=[])),n.fallback&&(i=[xa],s[0]=mt(H=>(a[0]=H,n.fallback())),l=1);else if(l===0){for(s=new Array(g),f=0;f<g;f++)i[f]=u[f],s[f]=mt(T);l=g}else{for(k=new Array(g),_=new Array(g),r&&(I=new Array(g)),C=0,B=Math.min(l,g);C<B&&i[C]===u[C];C++);for(B=l-1,S=g-1;B>=C&&S>=C&&i[B]===u[S];B--,S--)k[S]=s[B],_[S]=a[B],r&&(I[S]=r[B]);for(b=new Map,z=new Array(S+1),f=S;f>=C;f--)$=u[f],h=b.get($),z[f]=h===void 0?-1:h,b.set($,f);for(h=C;h<=B;h++)$=i[h],f=b.get($),f!==void 0&&f!==-1?(k[f]=s[h],_[f]=a[h],r&&(I[f]=r[h]),f=z[f],b.set($,f)):a[h]();for(f=C;f<g;f++)f in k?(s[f]=k[f],a[f]=_[f],r&&(r[f]=I[f],r[f](f))):s[f]=mt(T);s=s.slice(0,l=g),i=u.slice(0)}return s});function T(b){if(a[f]=b,r){const[z,k]=P(f);return r[f]=k,t(u[f],z)}return t(u[f])}}}function N(e,t){return Te(()=>e(t||{}))}function At(){return!0}const Ia={get(e,t,n){return t===xn?n:e.get(t)},has(e,t){return t===xn?!0:e.has(t)},set:At,deleteProperty:At,getOwnPropertyDescriptor(e,t){return{configurable:!0,enumerable:!0,get(){return e.get(t)},set:At,deleteProperty:At}},ownKeys(e){return e.keys()}};function un(e){return(e=typeof e=="function"?e():e)?e:{}}function La(){for(let e=0,t=this.length;e<t;++e){const n=this[e]();if(n!==void 0)return n}}function Ea(...e){let t=!1;for(let l=0;l<e.length;l++){const r=e[l];t=t||!!r&&xn in r,e[l]=typeof r=="function"?(t=!0,G(r)):r}if(ma&&t)return new Proxy({get(l){for(let r=e.length-1;r>=0;r--){const u=un(e[r])[l];if(u!==void 0)return u}},has(l){for(let r=e.length-1;r>=0;r--)if(l in un(e[r]))return!0;return!1},keys(){const l=[];for(let r=0;r<e.length;r++)l.push(...Object.keys(un(e[r])));return[...new Set(l)]}},Ia);const n={},i=Object.create(null);for(let l=e.length-1;l>=0;l--){const r=e[l];if(!r)continue;const u=Object.getOwnPropertyNames(r);for(let g=u.length-1;g>=0;g--){const h=u[g];if(h==="__proto__"||h==="constructor")continue;const f=Object.getOwnPropertyDescriptor(r,h);if(!i[h])i[h]=f.get?{enumerable:!0,configurable:!0,get:La.bind(n[h]=[f.get.bind(r)])}:f.value!==void 0?f:void 0;else{const T=n[h];T&&(f.get?T.push(f.get.bind(r)):f.value!==void 0&&T.push(()=>f.value))}}}const s={},a=Object.keys(i);for(let l=a.length-1;l>=0;l--){const r=a[l],u=i[r];u&&u.get?Object.defineProperty(s,r,u):s[r]=u?u.value:void 0}return s}const za=e=>`Stale read from <${e}>.`;function Aa(e){const t="fallback"in e&&{fallback:()=>e.fallback};return G(Ca(()=>e.each,e.children,t||void 0))}function ue(e){const t=e.keyed,n=G(()=>e.when,void 0,void 0),i=t?n:G(n,void 0,{equals:(s,a)=>!s==!a});return G(()=>{const s=i();if(s){const a=e.children;return typeof a=="function"&&a.length>0?Te(()=>a(t?s:()=>{if(!Te(i))throw za("Show");return n()})):a}return e.fallback},void 0,void 0)}const X=e=>G(()=>e());function Da(e,t,n){let i=n.length,s=t.length,a=i,l=0,r=0,u=t[s-1].nextSibling,g=null;for(;l<s||r<a;){if(t[l]===n[r]){l++,r++;continue}for(;t[s-1]===n[a-1];)s--,a--;if(s===l){const h=a<i?r?n[r-1].nextSibling:n[a-r]:u;for(;r<a;)e.insertBefore(n[r++],h)}else if(a===r)for(;l<s;)(!g||!g.has(t[l]))&&t[l].remove(),l++;else if(t[l]===n[a-1]&&n[r]===t[s-1]){const h=t[--s].nextSibling;e.insertBefore(n[r++],t[l++].nextSibling),e.insertBefore(n[--a],h),t[s]=n[a]}else{if(!g){g=new Map;let f=r;for(;f<a;)g.set(n[f],f++)}const h=g.get(t[l]);if(h!=null)if(r<h&&h<a){let f=l,T=1,b;for(;++f<s&&f<a&&!((b=g.get(t[f]))==null||b!==h+T);)T++;if(T>h-r){const z=t[l];for(;r<h;)e.insertBefore(n[r++],z)}else e.replaceChild(n[r++],t[l++])}else l++;else t[l++].remove()}}}const gi="_$DX_DELEGATE";function Pa(e,t,n,i={}){let s;return mt(a=>{s=a,t===document?e():c(t,e(),t.firstChild?null:void 0,n)},i.owner),()=>{s(),t.textContent=""}}function A(e,t,n,i){let s;const a=()=>{const r=document.createElement("template");return r.innerHTML=e,r.content.firstChild},l=()=>(s||(s=a())).cloneNode(!0);return l.cloneNode=l,l}function St(e,t=window.document){const n=t[gi]||(t[gi]=new Set);for(let i=0,s=e.length;i<s;i++){const a=e[i];n.has(a)||(n.add(a),t.addEventListener(a,ja))}}function V(e,t,n){n==null?e.removeAttribute(t):e.setAttribute(t,n)}function ge(e,t){t==null?e.removeAttribute("class"):e.className=t}function we(e,t,n,i){if(i)Array.isArray(n)?(e[`$$${t}`]=n[0],e[`$$${t}Data`]=n[1]):e[`$$${t}`]=n;else if(Array.isArray(n)){const s=n[0];e.addEventListener(t,n[0]=a=>s.call(e,n[1],a))}else e.addEventListener(t,n,typeof n!="function"&&n)}function nt(e,t,n){n!=null?e.style.setProperty(t,n):e.style.removeProperty(t)}function fi(e,t,n){return Te(()=>e(t,n))}function c(e,t,n,i){if(n!==void 0&&!i&&(i=[]),typeof t!="function")return Kt(e,t,i,n);L(s=>Kt(e,t(),s,n),i)}function ja(e){let t=e.target;const n=`$$${e.type}`,i=e.target,s=e.currentTarget,a=u=>Object.defineProperty(e,"target",{configurable:!0,value:u}),l=()=>{const u=t[n];if(u&&!t.disabled){const g=t[`${n}Data`];if(g!==void 0?u.call(t,g,e):u.call(t,e),e.cancelBubble)return}return t.host&&typeof t.host!="string"&&!t.host._$host&&t.contains(e.target)&&a(t.host),!0},r=()=>{for(;l()&&(t=t._$host||t.parentNode||t.host););};if(Object.defineProperty(e,"currentTarget",{configurable:!0,get(){return t||document}}),e.composedPath){const u=e.composedPath();a(u[0]);for(let g=0;g<u.length-2&&(t=u[g],!!l());g++){if(t._$host){t=t._$host,r();break}if(t.parentNode===s)break}}else r();a(i)}function Kt(e,t,n,i,s){for(;typeof n=="function";)n=n();if(t===n)return n;const a=typeof t,l=i!==void 0;if(e=l&&n[0]&&n[0].parentNode||e,a==="string"||a==="number"){if(a==="number"&&(t=t.toString(),t===n))return n;if(l){let r=n[0];r&&r.nodeType===3?r.data!==t&&(r.data=t):r=document.createTextNode(t),n=it(e,n,i,r)}else n!==""&&typeof n=="string"?n=e.firstChild.data=t:n=e.textContent=t}else if(t==null||a==="boolean")n=it(e,n,i);else{if(a==="function")return L(()=>{let r=t();for(;typeof r=="function";)r=r();n=Kt(e,r,n,i)}),()=>n;if(Array.isArray(t)){const r=[],u=n&&Array.isArray(n);if(In(r,t,n,s))return L(()=>n=Kt(e,r,n,i,!0)),()=>n;if(r.length===0){if(n=it(e,n,i),l)return n}else u?n.length===0?hi(e,r,i):Da(e,n,r):(n&&it(e),hi(e,r));n=r}else if(t.nodeType){if(Array.isArray(n)){if(l)return n=it(e,n,i,t);it(e,n,null,t)}else n==null||n===""||!e.firstChild?e.appendChild(t):e.replaceChild(t,e.firstChild);n=t}}return n}function In(e,t,n,i){let s=!1;for(let a=0,l=t.length;a<l;a++){let r=t[a],u=n&&n[e.length],g;if(!(r==null||r===!0||r===!1))if((g=typeof r)=="object"&&r.nodeType)e.push(r);else if(Array.isArray(r))s=In(e,r,u)||s;else if(g==="function")if(i){for(;typeof r=="function";)r=r();s=In(e,Array.isArray(r)?r:[r],Array.isArray(u)?u:[u])||s}else e.push(r),s=!0;else{const h=String(r);u&&u.nodeType===3&&u.data===h?e.push(u):e.push(document.createTextNode(h))}}return s}function hi(e,t,n=null){for(let i=0,s=t.length;i<s;i++)e.insertBefore(t[i],n)}function it(e,t,n,i){if(n===void 0)return e.textContent="";const s=i||document.createTextNode("");if(t.length){let a=!1;for(let l=t.length-1;l>=0;l--){const r=t[l];if(s!==r){const u=r.parentNode===e;!a&&!l?u?e.replaceChild(s,r):e.insertBefore(s,n):u&&r.remove()}else a=!0}}else e.insertBefore(s,n);return[s]}const Ra=!1;function ns(){let e=new Set;function t(s){return e.add(s),()=>e.delete(s)}let n=!1;function i(s,a){if(n)return!(n=!1);const l={to:s,options:a,defaultPrevented:!1,preventDefault:()=>l.defaultPrevented=!0};for(const r of e)r.listener({...l,from:r.location,retry:u=>{u&&(n=!0),r.navigate(s,{...a,resolve:!1})}});return!l.defaultPrevented}return{subscribe:t,confirm:i}}let Ln;function Wn(){(!window.history.state||window.history.state._depth==null)&&window.history.replaceState({...window.history.state,_depth:window.history.length-1},""),Ln=window.history.state._depth}Wn();function Oa(e){return{...e,_depth:window.history.state&&window.history.state._depth}}function Wa(e,t){let n=!1;return()=>{const i=Ln;Wn();const s=i==null?null:Ln-i;if(n){n=!1;return}s&&t(s)?(n=!0,window.history.go(-s)):e()}}const Na=/^(?:[a-z0-9]+:)?\/\//i,Ga=/^\/+|(\/)\/+$/g,is="http://sr";function pt(e,t=!1){const n=e.replace(Ga,"$1");return n?t||/^[?#]/.test(n)?n:"/"+n:""}function Gt(e,t,n){if(Na.test(t))return;const i=pt(e),s=n&&pt(n);let a="";return!s||t.startsWith("/")?a=i:s.toLowerCase().indexOf(i.toLowerCase())!==0?a=i+s:a=s,(a||"/")+pt(t,!a)}function Ba(e,t){if(e==null)throw new Error(t);return e}function Ua(e,t){return pt(e).replace(/\/*(\*.*)?$/g,"")+pt(t)}function ss(e){const t={};return e.searchParams.forEach((n,i)=>{i in t?Array.isArray(t[i])?t[i].push(n):t[i]=[t[i],n]:t[i]=n}),t}function Fa(e,t,n){const[i,s]=e.split("/*",2),a=i.split("/").filter(Boolean),l=a.length;return r=>{const u=r.split("/").filter(Boolean),g=u.length-l;if(g<0||g>0&&s===void 0&&!t)return null;const h={path:l?"":"/",params:{}},f=T=>n===void 0?void 0:n[T];for(let T=0;T<l;T++){const b=a[T],z=b[0]===":",k=z?u[T]:u[T].toLowerCase(),_=z?b.slice(1):b.toLowerCase();if(z&&gn(k,f(_)))h.params[_]=k;else if(z||!gn(k,_))return null;h.path+=`/${k}`}if(s){const T=g?u.slice(-g).join("/"):"";if(gn(T,f(s)))h.params[s]=T;else return null}return h}}function gn(e,t){const n=i=>i===e;return t===void 0?!0:typeof t=="string"?n(t):typeof t=="function"?t(e):Array.isArray(t)?t.some(n):t instanceof RegExp?t.test(e):!1}function Ma(e){const[t,n]=e.pattern.split("/*",2),i=t.split("/").filter(Boolean);return i.reduce((s,a)=>s+(a.startsWith(":")?2:3),i.length-(n===void 0?0:1))}function as(e){const t=new Map,n=Vi();return new Proxy({},{get(i,s){return t.has(s)||Yi(n,()=>t.set(s,G(()=>e()[s]))),t.get(s)()},getOwnPropertyDescriptor(){return{enumerable:!0,configurable:!0}},ownKeys(){return Reflect.ownKeys(e())},has(i,s){return s in e()}})}function rs(e){let t=/(\/?\:[^\/]+)\?/.exec(e);if(!t)return[e];let n=e.slice(0,t.index),i=e.slice(t.index+t[0].length);const s=[n,n+=t[1]];for(;t=/^(\/\:[^\/]+)\?/.exec(i);)s.push(n+=t[1]),i=i.slice(t[0].length);return rs(i).reduce((a,l)=>[...a,...s.map(r=>r+l)],[])}const Ha=100,os=Ji(),ls=Ji(),cs=()=>Ba(Zi(os),"<A> and 'use' router primitives can be only used inside a Route."),qa=()=>cs().navigatorFactory(),Ka=()=>cs().location;function Va(e,t=""){const{component:n,preload:i,load:s,children:a,info:l}=e,r=!a||Array.isArray(a)&&!a.length,u={key:e,component:n,preload:i||s,info:l};return ds(e.path).reduce((g,h)=>{for(const f of rs(h)){const T=Ua(t,f);let b=r?T:T.split("/*",1)[0];b=b.split("/").map(z=>z.startsWith(":")||z.startsWith("*")?z:encodeURIComponent(z)).join("/"),g.push({...u,originalPath:h,pattern:b,matcher:Fa(b,!r,e.matchFilters)})}return g},[])}function Ya(e,t=0){return{routes:e,score:Ma(e[e.length-1])*1e4-t,matcher(n){const i=[];for(let s=e.length-1;s>=0;s--){const a=e[s],l=a.matcher(n);if(!l)return null;i.unshift({...l,route:a})}return i}}}function ds(e){return Array.isArray(e)?e:[e]}function us(e,t="",n=[],i=[]){const s=ds(e);for(let a=0,l=s.length;a<l;a++){const r=s[a];if(r&&typeof r=="object"){r.hasOwnProperty("path")||(r.path="");const u=Va(r,t);for(const g of u){n.push(g);const h=Array.isArray(r.children)&&r.children.length===0;if(r.children&&!h)us(r.children,g.pattern,n,i);else{const f=Ya([...n],i.length);i.push(f)}n.pop()}}}return n.length?i:i.sort((a,l)=>l.score-a.score)}function fn(e,t){for(let n=0,i=e.length;n<i;n++){const s=e[n].matcher(t);if(s)return s}return[]}function Ja(e,t,n){const i=new URL(is),s=G(h=>{const f=e();try{return new URL(f,i)}catch{return console.error(`Invalid path ${f}`),h}},i,{equals:(h,f)=>h.href===f.href}),a=G(()=>s().pathname),l=G(()=>s().search,!0),r=G(()=>s().hash),u=()=>"",g=Pn(l,()=>ss(s()));return{get pathname(){return a()},get search(){return l()},get hash(){return r()},get state(){return t()},get key(){return u()},query:n?n(g):as(g)}}let Ve;function Za(){return Ve}function Xa(e,t,n,i={}){const{signal:[s,a],utils:l={}}=e,r=l.parsePath||(x=>x),u=l.renderPath||(x=>x),g=l.beforeLeave||ns(),h=Gt("",i.base||"");if(h===void 0)throw new Error(`${h} is not a valid base path`);h&&!s().value&&a({value:h,replace:!0,scroll:!1});const[f,T]=P(!1);let b;const z=(x,D)=>{D.value===k()&&D.state===I()||(b===void 0&&T(!0),Ve=x,b=D,va(()=>{b===D&&(_(b.value),C(b.state),$[1](K=>K.filter(E=>E.pending)))}).finally(()=>{b===D&&ya(()=>{Ve=void 0,x==="navigate"&&ae(b),T(!1),b=void 0})}))},[k,_]=P(s().value),[I,C]=P(s().state),B=Ja(k,I,l.queryWrapper),S=[],$=P([]),H=G(()=>typeof i.transformUrl=="function"?fn(t(),i.transformUrl(B.pathname)):fn(t(),B.pathname)),Q=()=>{const x=H(),D={};for(let K=0;K<x.length;K++)Object.assign(D,x[K].params);return D},ee=l.paramsWrapper?l.paramsWrapper(Q,t):as(Q),fe={pattern:h,path:()=>h,outlet:()=>null,resolvePath(x){return Gt(h,x)}};return L(Pn(s,x=>z("native",x),{defer:!0})),{base:fe,location:B,params:ee,isRouting:f,renderPath:u,parsePath:r,navigatorFactory:xe,matches:H,beforeLeave:g,preloadRoute:j,singleFlight:i.singleFlight===void 0?!0:i.singleFlight,submissions:$};function q(x,D,K){Te(()=>{if(typeof D=="number"){D&&(l.go?l.go(D):console.warn("Router integration does not support relative routing"));return}const E=!D||D[0]==="?",{replace:p,resolve:W,scroll:U,state:M}={replace:!1,resolve:!E,scroll:!0,...K},te=W?x.resolvePath(D):Gt(E&&B.pathname||"",D);if(te===void 0)throw new Error(`Path '${D}' is not a routable path`);if(S.length>=Ha)throw new Error("Too many redirects");const ne=k();(te!==ne||M!==I())&&(Ra||g.confirm(te,K)&&(S.push({value:ne,replace:p,scroll:U,state:I()}),z("navigate",{value:te,state:M})))})}function xe(x){return x=x||Zi(ls)||fe,(D,K)=>q(x,D,K)}function ae(x){const D=S[0];D&&(a({...x,replace:D.replace,scroll:D.scroll}),S.length=0)}function j(x,D){const K=fn(t(),x.pathname),E=Ve;Ve="preload";for(let p in K){const{route:W,params:U}=K[p];W.component&&W.component.preload&&W.component.preload();const{preload:M}=W;D&&M&&Yi(n(),()=>M({params:U,location:{pathname:x.pathname,search:x.search,hash:x.hash,query:ss(x),state:null,key:""},intent:"preload"}))}Ve=E}}function Qa(e,t,n,i){const{base:s,location:a,params:l}=e,{pattern:r,component:u,preload:g}=i().route,h=G(()=>i().path);u&&u.preload&&u.preload();const f=g?g({params:l,location:a,intent:Ve||"initial"}):void 0;return{parent:t,pattern:r,path:h,outlet:()=>u?N(u,{params:l,location:a,data:f,get children(){return n()}}):n(),resolvePath(b){return Gt(s.path(),b,h())}}}const er=e=>t=>{const{base:n}=t,i=jn(()=>t.children),s=G(()=>us(i(),t.base||""));let a;const l=Xa(e,s,()=>a,{base:n,singleFlight:t.singleFlight,transformUrl:t.transformUrl});return e.create&&e.create(l),N(os.Provider,{value:l,get children(){return N(tr,{routerState:l,get root(){return t.root},get preload(){return t.rootPreload||t.rootLoad},get children(){return[X(()=>(a=Vi())&&null),N(nr,{routerState:l,get branches(){return s()}})]}})}})};function tr(e){const t=e.routerState.location,n=e.routerState.params,i=G(()=>e.preload&&Te(()=>{e.preload({params:n,location:t,intent:Za()||"initial"})}));return N(ue,{get when(){return e.root},keyed:!0,get fallback(){return e.children},children:s=>N(s,{params:n,location:t,get data(){return i()},get children(){return e.children}})})}function nr(e){const t=[];let n;const i=G(Pn(e.routerState.matches,(s,a,l)=>{let r=a&&s.length===a.length;const u=[];for(let g=0,h=s.length;g<h;g++){const f=a&&a[g],T=s[g];l&&f&&T.route.key===f.route.key?u[g]=l[g]:(r=!1,t[g]&&t[g](),mt(b=>{t[g]=b,u[g]=Qa(e.routerState,u[g-1]||e.routerState.base,mi(()=>i()[g+1]),()=>{const z=e.routerState.matches();return z[g]??z[0]})}))}return t.splice(s.length).forEach(g=>g()),l&&r?l:(n=u[0],u)}));return mi(()=>i()&&n)()}const mi=e=>()=>N(ue,{get when(){return e()},keyed:!0,children:t=>N(ls.Provider,{value:t,get children(){return t.outlet()}})}),ir=e=>{const t=jn(()=>e.children);return Ea(e,{get children(){return t()}})};function sr([e,t],n,i){return[e,i?s=>t(i(s)):t]}function ar(e){let t=!1;const n=s=>typeof s=="string"?{value:s}:s,i=sr(P(n(e.get()),{equals:(s,a)=>s.value===a.value&&s.state===a.state}),void 0,s=>(!t&&e.set(s),s));return e.init&&wt(e.init((s=e.get())=>{t=!0,i[1](n(s)),t=!1})),er({signal:i,create:e.create,utils:e.utils})}function rr(e,t,n){return e.addEventListener(t,n),()=>e.removeEventListener(t,n)}function or(e,t){const n=e&&document.getElementById(e);n?n.scrollIntoView():t&&window.scrollTo(0,0)}const lr=new Map;function cr(e=!0,t=!1,n="/_server",i){return s=>{const a=s.base.path(),l=s.navigatorFactory(s.base);let r,u;function g(k){return k.namespaceURI==="http://www.w3.org/2000/svg"}function h(k){if(k.defaultPrevented||k.button!==0||k.metaKey||k.altKey||k.ctrlKey||k.shiftKey)return;const _=k.composedPath().find(H=>H instanceof Node&&H.nodeName.toUpperCase()==="A");if(!_||t&&!_.hasAttribute("link"))return;const I=g(_),C=I?_.href.baseVal:_.href;if((I?_.target.baseVal:_.target)||!C&&!_.hasAttribute("state"))return;const S=(_.getAttribute("rel")||"").split(/\s+/);if(_.hasAttribute("download")||S&&S.includes("external"))return;const $=I?new URL(C,document.baseURI):new URL(C);if(!($.origin!==window.location.origin||a&&$.pathname&&!$.pathname.toLowerCase().startsWith(a.toLowerCase())))return[_,$]}function f(k){const _=h(k);if(!_)return;const[I,C]=_,B=s.parsePath(C.pathname+C.search+C.hash),S=I.getAttribute("state");k.preventDefault(),l(B,{resolve:!1,replace:I.hasAttribute("replace"),scroll:!I.hasAttribute("noscroll"),state:S?JSON.parse(S):void 0})}function T(k){const _=h(k);if(!_)return;const[I,C]=_;i&&(C.pathname=i(C.pathname)),s.preloadRoute(C,I.getAttribute("preload")!=="false")}function b(k){clearTimeout(r);const _=h(k);if(!_)return u=null;const[I,C]=_;u!==I&&(i&&(C.pathname=i(C.pathname)),r=setTimeout(()=>{s.preloadRoute(C,I.getAttribute("preload")!=="false"),u=I},20))}function z(k){if(k.defaultPrevented)return;let _=k.submitter&&k.submitter.hasAttribute("formaction")?k.submitter.getAttribute("formaction"):k.target.getAttribute("action");if(!_)return;if(!_.startsWith("https://action/")){const C=new URL(_,is);if(_=s.parsePath(C.pathname+C.search),!_.startsWith(n))return}if(k.target.method.toUpperCase()!=="POST")throw new Error("Only POST forms are supported for Actions");const I=lr.get(_);if(I){k.preventDefault();const C=new FormData(k.target,k.submitter);I.call({r:s,f:k.target},k.target.enctype==="multipart/form-data"?C:new URLSearchParams(C))}}St(["click","submit"]),document.addEventListener("click",f),e&&(document.addEventListener("mousemove",b,{passive:!0}),document.addEventListener("focusin",T,{passive:!0}),document.addEventListener("touchstart",T,{passive:!0})),document.addEventListener("submit",z),wt(()=>{document.removeEventListener("click",f),e&&(document.removeEventListener("mousemove",b),document.removeEventListener("focusin",T),document.removeEventListener("touchstart",T)),document.removeEventListener("submit",z)})}}function dr(e){const t=()=>{const i=window.location.pathname.replace(/^\/+/,"/")+window.location.search,s=window.history.state&&window.history.state._depth&&Object.keys(window.history.state).length===1?void 0:window.history.state;return{value:i+window.location.hash,state:s}},n=ns();return ar({get:t,set({value:i,replace:s,scroll:a,state:l}){s?window.history.replaceState(Oa(l),"",i):window.history.pushState(l,"",i),or(decodeURIComponent(window.location.hash.slice(1)),a),Wn()},init:i=>rr(window,"popstate",Wa(i,s=>{if(s)return!n.confirm(s);{const a=t();return!n.confirm(a.value,{state:a.state})}})),create:cr(e.preload,e.explicitLinks,e.actionBase,e.transformUrl),utils:{go:i=>window.history.go(i),beforeLeave:n}})(e)}const ur="modulepreload",gr=function(e){return"/"+e},pi={},fr=function(t,n,i){let s=Promise.resolve();if(n&&n.length>0){let g=function(h){return Promise.all(h.map(f=>Promise.resolve(f).then(T=>({status:"fulfilled",value:T}),T=>({status:"rejected",reason:T}))))};var l=g;document.getElementsByTagName("link");const r=document.querySelector("meta[property=csp-nonce]"),u=r?.nonce||r?.getAttribute("nonce");s=g(n.map(h=>{if(h=gr(h),h in pi)return;pi[h]=!0;const f=h.endsWith(".css"),T=f?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${h}"]${T}`))return;const b=document.createElement("link");if(b.rel=f?"stylesheet":ur,f||(b.as="script"),b.crossOrigin="",b.href=h,u&&b.setAttribute("nonce",u),document.head.appendChild(b),f)return new Promise((z,k)=>{b.addEventListener("load",z),b.addEventListener("error",()=>k(new Error(`Unable to preload CSS for ${h}`)))})}))}function a(r){const u=new Event("vite:preloadError",{cancelable:!0});if(u.payload=r,window.dispatchEvent(u),!u.defaultPrevented)throw r}return s.then(r=>{for(const u of r||[])u.status==="rejected"&&a(u.reason);return t().catch(a)})};function hr(e={}){const{immediate:t=!1,onNeedRefresh:n,onOfflineReady:i,onRegistered:s,onRegisteredSW:a,onRegisterError:l}=e;let r,u;const g=async(f=!0)=>{await u};async function h(){if("serviceWorker"in navigator){if(r=await fr(async()=>{const{Workbox:f}=await import("./workbox-window.prod.es5-BIl4cyR9.js");return{Workbox:f}},[]).then(({Workbox:f})=>new f("/sw.js",{scope:"/",type:"classic"})).catch(f=>{l?.(f)}),!r)return;r.addEventListener("activated",f=>{(f.isUpdate||f.isExternal)&&window.location.reload()}),r.addEventListener("installed",f=>{f.isUpdate||i?.()}),r.register({immediate:t}).then(f=>{a?a("/sw.js",f):s?.(f)}).catch(f=>{l?.(f)})}}return u=h(),g}const mr={BASE_URL:"/",DEV:!1,MODE:"production",PROD:!0,SSR:!1,VITE_APP_URL:"https://being-better.app",VITE_GOOGLE_CLIENT_ID:"35364796407-bcpb0lbo442lrro45tmkjrqesm4scpkn.apps.googleusercontent.com"};var pr={};function bt(e){const n=mr?.[e];if(typeof n=="string")return n;const i=globalThis.Bun?.env?.[e];if(typeof i=="string")return i;const s=pr?.[e];if(typeof s=="string")return s}function at(e){const t=document.cookie.split("; ");for(const n of t){const i=n.indexOf("=");if(i<0)continue;if(n.slice(0,i)===e)return n.slice(i+1)}return null}function rt(e,t,n){document.cookie=`${e}=${t}; Max-Age=${Math.max(0,Math.floor(n))}; Path=/; SameSite=Lax`}function br(e){document.cookie=`${e}=; Max-Age=0; Path=/; SameSite=Lax`}const bi=bt("VITE_GOOGLE_CLIENT_ID")??"",yi="beingbetter",Ze="data",Ye="settings",hn="being_better_auth",wi=["timestamp","words","suggested_words_used","intensity_energy","intensity_stress","intensity_anxiety","intensity_joy","context_tags"],yr=["https://www.googleapis.com/auth/drive.file","https://www.googleapis.com/auth/spreadsheets"].join(" ");class gs extends Error{constructor(){super("Missing VITE_GOOGLE_CLIENT_ID")}}class wr{tokenClient=null;hasGrantedToken=!1;currentSpreadsheetId=null;currentAccountLabel=null;authState="initializing";pendingSignIn=null;async init(){if(!bi)throw this.authState="needs_login",new gs;await Promise.all([Sr(),kr()]),await vr(),this.tokenClient=this.initTokenClient(),await this.restoreSessionFromCookie(),this.currentSpreadsheetId||(this.authState="needs_login")}async requestSignIn(){if(!this.tokenClient)throw new Error("OAuth client is not ready");if(this.pendingSignIn)throw new Error("Sign in already in progress");this.authState="initializing",await new Promise((t,n)=>{this.pendingSignIn={resolve:t,reject:n},this.tokenClient?.requestAccessToken({prompt:this.hasGrantedToken?"":"consent"})})}async appendCheckIn(t){if(!this.currentSpreadsheetId)throw new Error("Sign in required");await window.gapi?.client.sheets.spreadsheets.values.append({spreadsheetId:this.currentSpreadsheetId,range:`${Ze}!A:H`,valueInputOption:"RAW",insertDataOption:"INSERT_ROWS",resource:{values:[[t.timestamp,JSON.stringify(t.words),JSON.stringify(t.suggestedWordsUsed),t.intensity.energy===null?"":String(t.intensity.energy),t.intensity.stress===null?"":String(t.intensity.stress),t.intensity.anxiety===null?"":String(t.intensity.anxiety),t.intensity.joy===null?"":String(t.intensity.joy),JSON.stringify(t.contextTags)]]}})}async listCheckIns(t){if(!this.currentSpreadsheetId)throw new Error("Sign in required");const n=await window.gapi?.client.sheets.spreadsheets.values.get({spreadsheetId:this.currentSpreadsheetId,range:`${Ze}!A2:H`}),i=new Date(t.fromIso).getTime(),s=new Date(t.toIso).getTime();return(n?.result.values??[]).map(l=>Ir(l)).filter(l=>l!==null).filter(l=>{const r=new Date(l.timestamp).getTime();return Number.isFinite(r)&&r>=i&&r<=s})}async loadSettings(){if(!this.currentSpreadsheetId)throw new Error("Sign in required");const n=(await window.gapi?.client.sheets.spreadsheets.values.get({spreadsheetId:this.currentSpreadsheetId,range:`${Ye}!A2:B`}))?.result.values??[],i={};for(const s of n){const a=s[0],l=s[1];!a||typeof a!="string"||(i[a]=typeof l=="string"?l:"")}return i}async saveSettings(t){if(!this.currentSpreadsheetId)throw new Error("Sign in required");const n=Object.entries(t).sort(([i],[s])=>i.localeCompare(s)).map(([i,s])=>[i,s]);await window.gapi?.client.sheets.spreadsheets.values.clear({spreadsheetId:this.currentSpreadsheetId,range:`${Ye}!A2:B`}),n.length!==0&&await window.gapi?.client.sheets.spreadsheets.values.update({spreadsheetId:this.currentSpreadsheetId,range:`${Ye}!A2:B${n.length+1}`,valueInputOption:"RAW",resource:{values:n}})}isReady(){return this.currentSpreadsheetId!==null}getSourceUrl(){return this.currentSpreadsheetId?`https://docs.google.com/spreadsheets/d/${this.currentSpreadsheetId}/edit`:null}getAccountLabel(){return this.currentAccountLabel}getAuthState(){return this.authState}initTokenClient(){const t=window.google?.accounts?.oauth2;if(!t)throw new Error("Google Identity Services unavailable");return t.initTokenClient({client_id:bi,scope:yr,callback:n=>{this.handleTokenResponse(n)},error_callback:n=>{this.authState="needs_login";const i=this.pendingSignIn;this.pendingSignIn=null,i?.reject(n)}})}async handleTokenResponse(t){const n=this.pendingSignIn;try{if(!t.access_token)throw new Error("Missing access token");const i=Date.now()+t.expires_in*1e3;this.persistAuthSession({accessToken:t.access_token,expiresAtMs:i}),window.gapi?.client.setToken({access_token:t.access_token}),this.hasGrantedToken=!0,this.currentSpreadsheetId=await this.ensureSpreadsheet(),this.currentAccountLabel=await vi(this.currentSpreadsheetId),this.authState="connected",n?.resolve()}catch(i){this.clearAuthSession(),this.authState="needs_login",n?.reject(i)}finally{this.pendingSignIn=null}}async restoreSessionFromCookie(){const t=this.readAuthSession();if(t){if(Date.now()>=t.expiresAtMs){this.clearAuthSession();return}try{window.gapi?.client.setToken({access_token:t.accessToken}),this.hasGrantedToken=!0,this.currentSpreadsheetId=await this.ensureSpreadsheet(),this.currentAccountLabel=await vi(this.currentSpreadsheetId),this.authState="connected"}catch{this.clearAuthSession(),window.gapi?.client.setToken(null),this.authState="needs_login"}}}async ensureSpreadsheet(){const t=await _r(yi);if(t)return await Tr(t),await Si(t),t;const i=(await window.gapi?.client.sheets.spreadsheets.create({properties:{title:yi},sheets:[{properties:{title:Ze}},{properties:{title:Ye}}]}))?.result.spreadsheetId;if(!i)throw new Error("Sheets create returned no spreadsheetId");return await Si(i),i}persistAuthSession(t){const n=encodeURIComponent(JSON.stringify(t)),i=(t.expiresAtMs-Date.now())/1e3;rt(hn,n,i)}readAuthSession(){const t=at(hn);if(!t)return null;try{const n=JSON.parse(decodeURIComponent(t));return!n.accessToken||typeof n.expiresAtMs!="number"?null:{accessToken:n.accessToken,expiresAtMs:n.expiresAtMs}}catch{return null}}clearAuthSession(){br(hn),this.currentSpreadsheetId=null,this.currentAccountLabel=null}}async function vr(){await new Promise((e,t)=>{const n=window.gapi;if(!n){t(new Error("gapi unavailable"));return}n.load("client",()=>{Promise.all([n.client.load("drive","v3"),n.client.load("sheets","v4")]).then(()=>e()).catch(i=>t(i))})})}function Sr(){return fs(()=>!!window.google?.accounts?.oauth2)}function kr(){return fs(()=>!!window.gapi?.load)}function fs(e){return new Promise((t,n)=>{const s=Date.now(),a=()=>{if(e()){t();return}if(Date.now()-s>15e3){n(new Error("Timeout while loading external Google scripts"));return}window.setTimeout(a,50)};a()})}async function _r(e){const n=(await window.gapi?.client.drive.files.list({q:`name = '${Cr(e)}' and mimeType = 'application/vnd.google-apps.spreadsheet' and trashed = false and 'root' in parents`,spaces:"drive",fields:"files(id, createdTime)",orderBy:"createdTime asc",pageSize:10}))?.result.files;return n?.length?n[0]?.id??null:null}async function vi(e){try{const n=(await window.gapi?.client.drive.files.get({fileId:e,fields:"owners(emailAddress,displayName)"}))?.result.owners?.[0];return n?.emailAddress??n?.displayName??null}catch{return null}}async function Si(e){await Promise.all([$r(e),xr(e,Ye,["key","value"])])}async function $r(e){const n=(await window.gapi?.client.sheets.spreadsheets.values.get({spreadsheetId:e,range:`${Ze}!A1:H1`}))?.result.values?.[0]??[];wi.every((s,a)=>n[a]===s)||await window.gapi?.client.sheets.spreadsheets.values.update({spreadsheetId:e,range:`${Ze}!A1:H1`,valueInputOption:"RAW",resource:{values:[wi.slice()]}})}async function Tr(e){const t=await window.gapi?.client.sheets.spreadsheets.get({spreadsheetId:e,fields:"sheets.properties.title"}),n=new Set((t?.result.sheets??[]).map(s=>s.properties?.title).filter(s=>typeof s=="string")),i=[];n.has(Ze)||i.push({addSheet:{properties:{title:Ze}}}),n.has(Ye)||i.push({addSheet:{properties:{title:Ye}}}),i.length!==0&&await window.gapi?.client.sheets.spreadsheets.batchUpdate({spreadsheetId:e,resource:{requests:i}})}async function xr(e,t,n){const s=(await window.gapi?.client.sheets.spreadsheets.values.get({spreadsheetId:e,range:`${t}!A1:B1`}))?.result.values?.[0]??[];s[0]===n[0]&&s[1]===n[1]||await window.gapi?.client.sheets.spreadsheets.values.update({spreadsheetId:e,range:`${t}!A1:B1`,valueInputOption:"RAW",resource:{values:[n]}})}function Cr(e){return e.replace(/\\/g,"\\\\").replace(/'/g,"\\'")}function Ir(e){const t=e[0],n=mn(e[1]),i=mn(e[2]),s=Dt(e[3]),a=Dt(e[4]),l=Dt(e[5]),r=Dt(e[6]),u=mn(e[7]);return!t||!Number.isFinite(new Date(t).getTime())||!Pt(s)||!Pt(a)||!Pt(l)||!Pt(r)?null:{timestamp:t,words:n,suggestedWordsUsed:i,intensity:{energy:s,stress:a,anxiety:l,joy:r},contextTags:u}}function mn(e){if(!e)return[];try{const t=JSON.parse(e);return Array.isArray(t)?t.filter(n=>typeof n=="string"):[]}catch{return[]}}function Dt(e){if(!e)return null;const t=Number(e);return Number.isFinite(t)?t:null}function Pt(e){return e===null||Number.isFinite(e)&&e>=0&&e<=10}const Lr="being_better",Er=2,Je="checkins",Bt="timestampMs";class zr{ready=!1;authState="initializing";db=null;async init(){if(!("indexedDB"in window))throw this.authState="needs_login",new Error("IndexedDB is unavailable");this.db=await Ar(),this.ready=!0,this.authState="connected"}async appendCheckIn(t){const n=this.assertReady(),i=new Date(t.timestamp).getTime();if(!Number.isFinite(i))throw new Error("Invalid timestamp");const s=n.transaction(Je,"readwrite"),l=s.objectStore(Je).add({timestamp:t.timestamp,words:t.words,suggestedWordsUsed:t.suggestedWordsUsed,intensityEnergy:t.intensity.energy,intensityStress:t.intensity.stress,intensityAnxiety:t.intensity.anxiety,intensityJoy:t.intensity.joy,contextTags:t.contextTags,timestampMs:i});await Promise.all([ki(l),_i(s)])}async listCheckIns(t){const n=this.assertReady(),i=new Date(t.fromIso).getTime(),s=new Date(t.toIso).getTime();if(!Number.isFinite(i)||!Number.isFinite(s))return[];const a=n.transaction(Je,"readonly"),r=a.objectStore(Je).index(Bt).getAll(IDBKeyRange.bound(i,s)),u=await ki(r);return await _i(a),u.filter(g=>!!g&&typeof g.timestamp=="string"&&Array.isArray(g.words)&&Array.isArray(g.suggestedWordsUsed)&&jt(g.intensityEnergy)&&jt(g.intensityStress)&&jt(g.intensityAnxiety)&&jt(g.intensityJoy)&&Array.isArray(g.contextTags)).map(g=>({timestamp:g.timestamp,words:g.words.filter(h=>typeof h=="string"),suggestedWordsUsed:g.suggestedWordsUsed.filter(h=>typeof h=="string"),intensity:{energy:g.intensityEnergy,stress:g.intensityStress,anxiety:g.intensityAnxiety,joy:g.intensityJoy},contextTags:g.contextTags.filter(h=>typeof h=="string")}))}isReady(){return this.ready}getAuthState(){return this.authState}assertReady(){if(!this.ready||!this.db)throw new Error("Adapter not ready");return this.db}}function Ar(){return new Promise((e,t)=>{const n=window.indexedDB.open(Lr,Er);n.onupgradeneeded=()=>{const i=n.result,s=i.objectStoreNames.contains(Je)?n.transaction?.objectStore(Je):i.createObjectStore(Je,{keyPath:"id",autoIncrement:!0});s?.indexNames.contains(Bt)||s?.createIndex(Bt,Bt,{unique:!1})},n.onsuccess=()=>e(n.result),n.onerror=()=>t(n.error??new Error("Failed to open IndexedDB"))})}function ki(e){return new Promise((t,n)=>{e.onsuccess=()=>t(e.result),e.onerror=()=>n(e.error??new Error("IndexedDB request failed"))})}function _i(e){return new Promise((t,n)=>{e.oncomplete=()=>t(),e.onerror=()=>n(e.error??new Error("IndexedDB transaction failed")),e.onabort=()=>n(e.error??new Error("IndexedDB transaction aborted"))})}function jt(e){return e===null||typeof e=="number"&&Number.isFinite(e)&&e>=0&&e<=10}function Ut(e){return e==="indexeddb"||e==="local_api"?"indexeddb":e==="google"?"google":null}function pn(e){return(e??Ut(bt("VITE_DATA_BACKEND"))??"google")==="indexeddb"?new zr:new wr}const hs="being_better_locale",En=["pl","en"],Dr={pl:{"app.title":"better being","auth.signIn":"Zaloguj przez Google","auth.connected":"Połączono","status.waitingForLogin":"Oczekiwanie na logowanie.","status.missingClientId":"Ustaw VITE_GOOGLE_CLIENT_ID w środowisku (np. .env.local).","status.clickSignIn":"Kliknij '{signIn}'.","status.googleClientInitFailed":"Nie udało się uruchomić klienta Google API.","status.connected":"Połączono z Google. Możesz zapisywać dane.","status.sheetInitFailed":"Logowanie powiodło się, ale inicjalizacja arkusza nie powiodła się.","status.authRejected":"Autoryzacja Google została odrzucona lub przerwana.","status.oauthNotReady":"Klient OAuth nie jest gotowy.","status.openingGoogleLogin":"Otwieranie logowania Google...","status.signInFirst":"Najpierw zaloguj się przez Google.","status.invalidRating":"Podaj liczbę całkowitą od 1 do 10.","status.savingRating":"Zapisywanie oceny...","status.ratingSaved":"Ocena zapisana.","status.ratingSaveFailed":"Nie udało się zapisać oceny.","status.wordsRequired":"Wpisz przynajmniej jedno słowo o nastroju.","status.savingCheckIn":"Zapisywanie check-inu...","status.checkInSaved":"Check-in zapisany.","status.checkInSaveFailed":"Nie udało się zapisać check-inu.","status.cloudLoadFailed":"Nie udało się odczytać danych chmury słów.","status.sessionRestored":"Przywrócono sesję z poprzedniego logowania.","status.chartLoadFailed":"Nie udało się odczytać danych do wykresu.","status.generatingChart":"Generowanie wykresu z ostatniego tygodnia...","status.chartUpdated":"Wykres zaktualizowany.","status.localApiUnavailable":"Lokalne API jest niedostępne. Uruchom backend Bun.","status.indexedDbUnavailable":"IndexedDB jest niedostępne w tej przeglądarce.","status.appInstalled":"Aplikacja jest już zainstalowana.","status.installAccepted":"Instalacja rozpoczęta.","status.installDismissed":"Instalacja anulowana.","status.installNotAvailable":"Instalacja nie jest dostępna w tej chwili.","status.installUseBrowserMenu":"Użyj menu przeglądarki i wybierz „Zainstaluj aplikację”.","status.installNeedsHttps":"Instalacja wymaga HTTPS albo localhost.","status.installIosHint":"Na iOS użyj Udostępnij, a potem „Do ekranu początkowego”.","status.reminderSent":"Wysłano przypomnienie o podsumowaniu dnia.","status.reminderDue":"Czas na podsumowanie dnia.","status.reminderPermissionNeeded":"Przypomnienie jest gotowe, ale przeglądarka blokuje powiadomienia.","status.reminderPermissionGranted":"Powiadomienia o przypomnieniach są włączone.","status.reminderPermissionDenied":"Powiadomienia o przypomnieniach są zablokowane.","status.reminderPermissionManagedByBrowser":"Aby wyłączyć powiadomienia, użyj ustawień przeglądarki dla tej strony.","status.reminderNotificationsUnsupported":"Ta przeglądarka nie obsługuje powiadomień systemowych.","status.pushSetupFailed":"Nie udało się skonfigurować powiadomień push.","status.pushSyncFailed":"Nie udało się zapisać ustawień przypomnienia na serwerze.","status.storageLocationUpdated":"Zaktualizowano miejsce zapisu danych.","tabs.ariaLabel":"Widoki aplikacji","tabs.entry":"Zapisz jak się czujesz","tabs.week":"Ostatnie dni","tabs.settings":"Ustawienia","menu.toggle":"Otwórz menu","menu.theme":"Motyw","menu.account":"Konto","backend.ariaLabel":"Wybór źródła danych","backend.title":"Wybierz gdzie przechowywać dane","backend.description":"Zdecyduj, gdzie aplikacja ma zapisywać Twoje odpowiedzi.","backend.google":"Twój arkusz Google na Dysku Google","backend.indexedDb":"Lokalnie","backend.confirm":"Potwierdź wybór","backend.googleHelpLabel":"Informacje o Google Sheets","backend.googleHelpText":"Zostaniesz poproszony o logowanie do konta Google, a arkusz „beingbetter” zostanie utworzony automatycznie.","backend.indexedDbHelpLabel":"Informacje o IndexedDB","backend.indexedDbHelpText":"Dane są zapisywane lokalnie w tej przeglądarce i na tym urządzeniu.","backend.storageNoteGoogle":"Dane będą zapisywane na Twoim Dysku Google w arkuszu Google o nazwie „beingbetter”.","backend.storageNoteIndexedDb":"Dane będą zapisywane lokalnie na Twoim urządzeniu, w przeglądarce.","intro.title":"better being","intro.body":"To aplikacja do codziennego śledzenia samopoczucia i budowania lepszych nawyków.","intro.dataOwnership":"Wszystkie dane należą do Ciebie. Aplikacja nie przechowuje ich u siebie. Możesz zapisywać je na Dysku Google albo lokalnie w pamięci przeglądarki.","intro.legalHint":"Regulamin i Politykę prywatności znajdziesz w stopce.","intro.begin":"Zacznij","onboarding.languageTitle":"Wybierz język","onboarding.themeTitle":"Wybierz motyw","onboarding.handednessTitle":"Wybierz dominującą rękę","onboarding.backendTitle":"Wybierz miejsce zapisu danych","onboarding.changeLater":"To ustawienie możesz później zmienić w Ustawieniach.","onboarding.progress":"Krok {current} z {total}","onboarding.back":"Wstecz","onboarding.retryGoogle":"Spróbuj ponownie","form.step":"Krok 1","form.title":"Szybki check-in nastroju","form.subtitle":"Wybierz ocenę, która najlepiej oddaje dzisiejszy dzień.","form.question":"Jak oceniasz swój dzień?","form.words":"Jakimi słowami opiszesz ten moment?","form.wordsPlaceholder":"np. spokojny, spięty, wdzięczny...","form.wordCount":"Słowa: {count}/{limit}","form.wordLimitHint":"Możesz zapisać więcej niż 20 słów, ale najlepiej skupić się na najważniejszych.","form.suggestedWords":"Podpowiadane słowa","form.suggestedWord.calm":"spokój","form.suggestedWord.hopeful":"nadzieja","form.suggestedWord.tired":"zmęczenie","form.suggestedWord.drained":"wyczerpanie","form.suggestedWord.focused":"skupienie","form.suggestedWord.grateful":"wdzięczność","form.suggestedWord.overwhelmed":"przytłoczenie","form.suggestedWord.steady":"stabilność","form.suggestedWord.joyful":"radość","form.suggestedWord.restless":"niepokój","form.suggestedWord.clear":"jasność","form.suggestedWord.anxious":"lęk","form.suggestedWord.excited":"ekscytacja","form.suggestedWord.happy":"szczęście","form.energy":"Energia","form.stress":"Stres","form.anxiety":"Lęk","form.joy":"Radość","form.contextTags":"Tagi kontekstu","form.contextTag.sleep":"sen","form.contextTag.work":"praca","form.contextTag.social":"społeczne","form.contextTag.health":"zdrowie","form.contextTag.weather":"pogoda","form.contextTag.cycle":"cykl","form.customTagPlaceholder":"Dodaj własny tag","form.addTag":"Dodaj","form.helpLabel":"Jak odpowiedzieć","form.helpText":"Nie szukaj idealnej odpowiedzi. Wybierz liczbę, która teraz wydaje się najbardziej trafna.","form.save":"Zapisz check-in","cloud.title":"Chmura słów nastroju","cloud.empty":"Brak słów dla wybranego okresu.","cloud.timeframe":"Zakres czasu","cloud.today":"Ta chwila","cloud.week":"Tydzień","cloud.month":"Miesiąc","cloud.allTime":"Cały czas","analytics.summaryTitle":"Podsumowanie","analytics.totalCheckIns":"Liczba check-inów","analytics.activeDays":"Aktywne dni","analytics.currentStreak":"Aktualna passa (dni)","analytics.volumeTitle":"Aktywność z ostatnich 7 dni","analytics.noVolume":"Brak check-inów z ostatnich 7 dni.","analytics.contextTagsTitle":"Najczęstsze tagi kontekstu","analytics.suggestedWordsTitle":"Najczęściej wybierane podpowiedzi","analytics.noTags":"Brak tagów kontekstu w tym okresie.","analytics.noSuggestedWords":"Brak użytych słów z podpowiedzi.","chart.title":"Oceny z ostatnich 7 dni","chart.ariaLabel":"Wykres ocen z ostatnich 7 dni","chart.empty":"Brak danych z ostatniego tygodnia.","locale.label":"Język","theme.toggle":"Motyw: {theme}","theme.light":"jasny","theme.dark":"ciemny","theme.system":"systemowy","install.installApp":"Zainstaluj aplikację","install.installed":"Zainstalowano","footer.description":"Prosta aplikacja do codziennego check-inu samopoczucia i śledzenia trendów.","footer.terms":"Regulamin","footer.privacy":"Polityka prywatności","footer.feedback":"Zgłoś pomysł / błąd","footer.github":"Zobacz na GitHubie","legal.lastUpdated":"Ostatnia aktualizacja: 24 lutego 2026","legal.termsTitle":"Regulamin","legal.privacyTitle":"Polityka prywatności","legal.terms.sectionUseTitle":"Cel aplikacji i zastrzeżenie zdrowotne","legal.terms.sectionUseBody":"better being to narzędzie do autorefleksji i codziennych check-inów samopoczucia. Nie jest usługą medyczną i nie zapewnia diagnozy, leczenia, wsparcia kryzysowego ani profesjonalnej porady. W sytuacji zagrożenia skontaktuj się z lokalnymi służbami ratunkowymi lub licencjonowanym specjalistą.","legal.terms.sectionDataTitle":"Przechowywanie danych i usługi zewnętrzne","legal.terms.sectionDataBody":"Ty wybierasz miejsce zapisu: tryb Google (Google OAuth, Google Drive i Google Sheets) albo tryb lokalny (IndexedDB w przeglądarce). W trybie Google obowiązują także warunki i polityki Google. Po włączeniu przypomnień push subskrypcja push oraz ustawienia przypomnienia są wysyłane do skonfigurowanego backendu push.","legal.terms.sectionAvailabilityTitle":"Dostępność, gwarancje i odpowiedzialność","legal.terms.sectionAvailabilityBody":"Aplikacja jest udostępniana „as is” i może być zmieniana, wstrzymywana lub wyłączona. W maksymalnym zakresie dozwolonym przez prawo twórcy nie odpowiadają za szkody pośrednie lub następcze wynikające z używania albo braku dostępu do aplikacji. Odpowiadasz za kontrolę i kopię zapasową własnych danych.","legal.terms.sectionContactTitle":"Kontakt","legal.terms.sectionContactBody":"W pytaniach dotyczących regulaminu skontaktuj się z twórcami przez profile GitHub podane w stopce lub przez e-mail: self-trade-copious@duck.com.","legal.privacy.sectionCollectedTitle":"Jakie dane są zbierane","legal.privacy.sectionCollectedBody":"W zależności od wybranego trybu aplikacja zapisuje check-iny (czas, słowa nastroju, użyte podpowiedzi, opcjonalne skale intensywności i tagi kontekstu), ustawienia (język, motyw, przypomnienia, backend) oraz techniczne dane sesji w pamięci przeglądarki/cookie.","legal.privacy.sectionUsageTitle":"W jakim celu używamy danych","legal.privacy.sectionUsageBody":"Dane służą wyłącznie do działania funkcji aplikacji: zapisu i odczytu check-inów, obliczania trendów, stosowania ustawień, przywracania sesji i obsługi przypomnień. Nie używamy reklam ani zewnętrznej analityki.","legal.privacy.sectionStorageTitle":"Gdzie dane są przechowywane","legal.privacy.sectionStorageBody":"W trybie Google wpisy i ustawienia trafiają do Twojego arkusza „beingbetter” na Dysku Google. W trybie lokalnym wpisy pozostają w IndexedDB na urządzeniu. Jeśli skonfigurujesz backend push, metadane subskrypcji powiadomień są zapisywane w jego bazie.","legal.privacy.sectionRightsTitle":"Twoja kontrola","legal.privacy.sectionRightsBody":"Masz pełną kontrolę: możesz usuwać dane z arkusza Google, wyczyścić dane witryny w przeglądarce, cofnąć dostęp aplikacji w koncie Google oraz wyłączyć przypomnienia i powiadomienia.","legal.privacy.sectionContactTitle":"Kontakt i pytania","legal.privacy.sectionContactBody":"Jeśli masz pytania o prywatność, skontaktuj się z twórcą przez profil GitHub podany w stopce lub e-mail podany na publicznej stronie Polityki prywatności.","settings.language":"Domyślny język","settings.defaultPreferenceHelpLabel":"Informacja o ustawieniu domyślnym","settings.defaultPreferenceHelpText":"To ustawienie będzie używane domyślnie na nowych urządzeniach, na których zalogujesz się tym kontem.","settings.theme":"Domyślny motyw","settings.handedness":"Dominująca ręka","settings.storageLocation":"Miejsce zapisu danych","settings.openDriveFile":"Otwórz plik na Dysku Google","settings.loggedAs":"Zalogowano jako:","settings.reminderEnabled":"Przypominaj o podsumowaniu dnia","settings.reminderTime":"Godzina przypomnienia","settings.reminderPermission":"Powiadomienia przeglądarki","settings.reminderPermissionAction":"Włącz powiadomienia","settings.notificationsDefault":"Brak decyzji","settings.notificationsGranted":"Włączone","settings.notificationsDenied":"Zablokowane","settings.notificationsUnsupported":"Nieobsługiwane","handedness.right":"Prawa","handedness.left":"Lewa","reminder.notificationTitle":"better being","reminder.notificationBody":"Jak minął Twój dzień? Dodaj ocenę."},en:{"app.title":"better being","auth.signIn":"Sign in with Google","auth.connected":"Connected","status.waitingForLogin":"Waiting for sign in.","status.missingClientId":"Set VITE_GOOGLE_CLIENT_ID in the environment (for example, .env.local).","status.clickSignIn":"Click '{signIn}'.","status.googleClientInitFailed":"Failed to initialize the Google API client.","status.connected":"Connected to Google. You can save data now.","status.sheetInitFailed":"Sign in succeeded, but spreadsheet initialization failed.","status.authRejected":"Google authorization was rejected or interrupted.","status.oauthNotReady":"OAuth client is not ready.","status.openingGoogleLogin":"Opening Google sign in...","status.signInFirst":"Sign in with Google first.","status.invalidRating":"Enter an integer between 1 and 10.","status.savingRating":"Saving rating...","status.ratingSaved":"Rating saved.","status.ratingSaveFailed":"Failed to save rating.","status.wordsRequired":"Add at least one mood word.","status.savingCheckIn":"Saving check-in...","status.checkInSaved":"Check-in saved.","status.checkInSaveFailed":"Failed to save check-in.","status.cloudLoadFailed":"Failed to load word cloud data.","status.sessionRestored":"Session restored from previous sign in.","status.chartLoadFailed":"Failed to load data for the chart.","status.generatingChart":"Generating chart for the last week...","status.chartUpdated":"Chart updated.","status.localApiUnavailable":"Local API is unavailable. Start the Bun backend.","status.indexedDbUnavailable":"IndexedDB is unavailable in this browser.","status.appInstalled":"The app is already installed.","status.installAccepted":"Installation started.","status.installDismissed":"Installation was dismissed.","status.installNotAvailable":"Installation is not available right now.","status.installUseBrowserMenu":"Use the browser menu and choose Install app.","status.installNeedsHttps":"Installation requires HTTPS or localhost.","status.installIosHint":"On iOS, tap Share and then Add to Home Screen.","status.reminderSent":"Sent a reminder to record today's moment.","status.reminderDue":"It's time to log how your day went.","status.reminderPermissionNeeded":"Reminder is due, but browser notifications are blocked.","status.reminderPermissionGranted":"Reminder notifications are enabled.","status.reminderPermissionDenied":"Reminder notifications are blocked.","status.reminderPermissionManagedByBrowser":"To disable notifications, use your browser site settings.","status.reminderNotificationsUnsupported":"This browser does not support system notifications.","status.pushSetupFailed":"Failed to configure push notifications.","status.pushSyncFailed":"Failed to sync reminder settings to the server.","status.storageLocationUpdated":"Storage location updated.","tabs.ariaLabel":"App views","tabs.entry":"Record moment","tabs.week":"Past week","tabs.settings":"Settings","menu.toggle":"Open menu","menu.theme":"Theme","menu.account":"Account","backend.ariaLabel":"Data backend selection","backend.title":"Choose where to store data","backend.description":"Decide where the app should store your answers.","backend.google":"Your Google Sheet on Google Drive","backend.indexedDb":"On this device","backend.confirm":"Confirm selection","backend.googleHelpLabel":"Google Sheets info","backend.googleHelpText":'You will be prompted to sign in to your Google account, and the "beingbetter" Google Sheet will be created.',"backend.indexedDbHelpLabel":"IndexedDB information","backend.indexedDbHelpText":"Data is stored locally in this browser on this device.","backend.storageNoteGoogle":'Data will be stored on your Google Drive in a Google Sheet called "beingbetter".',"backend.storageNoteIndexedDb":"Data will be stored locally on your device, in the browser.","intro.title":"better being","intro.body":"This app helps you track daily wellbeing and (hopefully) build better habits over time.","intro.dataOwnership":"You own all of your data. The app does not store it for itself. You can store your data on Google Drive or locally in browser storage.","intro.legalHint":"You can find Terms of Service and Privacy Policy in the footer.","intro.begin":"Begin","onboarding.languageTitle":"Choose your language","onboarding.themeTitle":"Choose your theme","onboarding.handednessTitle":"Choose your dominant hand","onboarding.backendTitle":"Choose where to store your data","onboarding.changeLater":"You can change this later in Settings.","onboarding.progress":"Step {current} of {total}","onboarding.back":"Back","onboarding.retryGoogle":"Try again","form.step":"Step 1","form.title":"Mood check-in","form.subtitle":"","form.question":"How do you rate your day?","form.words":"Describe this moment in words","form.wordsPlaceholder":"for example calm, drained, hopeful...","form.wordCount":"Words: {count}/{limit}","form.wordLimitHint":"You can save more than 20 words, but concise entries are easier to review.","form.suggestedWords":"Suggested words","form.suggestedWord.calm":"calm","form.suggestedWord.hopeful":"hopeful","form.suggestedWord.tired":"tired","form.suggestedWord.drained":"drained","form.suggestedWord.focused":"focused","form.suggestedWord.grateful":"grateful","form.suggestedWord.overwhelmed":"overwhelmed","form.suggestedWord.steady":"steady","form.suggestedWord.joyful":"joyful","form.suggestedWord.restless":"restless","form.suggestedWord.clear":"clear","form.suggestedWord.anxious":"anxious","form.suggestedWord.excited":"excited","form.suggestedWord.happy":"happy","form.energy":"Energy","form.stress":"Stress","form.anxiety":"Anxiety","form.joy":"Joy","form.contextTags":"Context tags","form.contextTag.sleep":"sleep","form.contextTag.work":"work","form.contextTag.social":"social","form.contextTag.health":"health","form.contextTag.weather":"weather","form.contextTag.cycle":"cycle","form.customTagPlaceholder":"Add custom tag","form.addTag":"Add","form.helpLabel":"How to answer","form.helpText":"No need to overthink it. Pick the number that feels most accurate right now.","form.save":"Save check-in","cloud.title":"Mood word cloud","cloud.empty":"No words for this timeframe.","cloud.timeframe":"Timeframe","cloud.today":"Today","cloud.week":"Week","cloud.month":"Month","cloud.allTime":"All time","analytics.summaryTitle":"Summary","analytics.totalCheckIns":"Check-ins","analytics.activeDays":"Active days","analytics.currentStreak":"Current streak (days)","analytics.volumeTitle":"Activity in the last 7 days","analytics.noVolume":"No check-ins in the last 7 days.","analytics.contextTagsTitle":"Top context tags","analytics.suggestedWordsTitle":"Top suggested words used","analytics.noTags":"No context tags in this timeframe.","analytics.noSuggestedWords":"No suggested words used in this timeframe.","chart.title":"Ratings from the last 7 days","chart.ariaLabel":"Ratings chart from the last 7 days","chart.empty":"No data from the last week.","locale.label":"Language","theme.toggle":"Theme: {theme}","theme.light":"light","theme.dark":"dark","theme.system":"system","install.installApp":"Install as app","install.installed":"Installed","footer.description":"A lightweight app for daily wellbeing check-ins and trend tracking.","footer.terms":"Terms of Service","footer.privacy":"Privacy Policy","footer.feedback":"Feature / bug","footer.github":"View on GitHub","legal.lastUpdated":"Last updated: February 24, 2026","legal.termsTitle":"Terms of Service","legal.privacyTitle":"Privacy Policy","legal.terms.sectionUseTitle":"Purpose and health disclaimer","legal.terms.sectionUseBody":"better being is a self-reflection tool for daily wellbeing check-ins. It is not a medical service and does not provide diagnosis, treatment, crisis support, or professional advice. If you may be in danger or need clinical support, contact local emergency services or a licensed professional.","legal.terms.sectionDataTitle":"Data storage and third-party services","legal.terms.sectionDataBody":"You choose where entries are stored: Google mode (Google OAuth, Google Drive, and Google Sheets) or local mode (IndexedDB in your browser). In Google mode, your use is also subject to Google's terms and privacy policies. If push reminders are enabled, a push subscription and reminder settings are sent to the configured push backend.","legal.terms.sectionAvailabilityTitle":"Availability, warranties, and liability","legal.terms.sectionAvailabilityBody":'The app is provided "as is" and may change, pause, or stop at any time. To the maximum extent permitted by law, maintainers are not liable for indirect or consequential losses resulting from use of or inability to use the app. You are responsible for reviewing and backing up your own data.',"legal.terms.sectionContactTitle":"Contact","legal.terms.sectionContactBody":"For Terms questions, contact the maintainers via the GitHub profiles in the footer or by email at self-trade-copious@duck.com.","legal.privacy.sectionCollectedTitle":"What data is collected","legal.privacy.sectionCollectedBody":"Depending on your selected mode, the app stores check-ins (timestamp, mood words, suggested words used, optional intensity fields, context tags), app settings (language, theme, reminders, backend), and technical session/preferences data in browser storage and cookies.","legal.privacy.sectionUsageTitle":"How data is used","legal.privacy.sectionUsageBody":"Data is used only to run app features: save and load check-ins, calculate insights, apply your settings, restore sign-in state, and handle reminders. No ads or third-party analytics are used.","legal.privacy.sectionStorageTitle":"Where data is stored","legal.privacy.sectionStorageBody":'In Google mode, entries and settings are stored in your Google Drive spreadsheet named "beingbetter". In local mode, entries are stored in IndexedDB on your device. If a push backend is configured, notification subscription metadata is stored there.',"legal.privacy.sectionRightsTitle":"Your control","legal.privacy.sectionRightsBody":"You control your data. You can delete spreadsheet data, clear browser site data, revoke Google access for the app, and disable reminders/notifications at any time.","legal.privacy.sectionContactTitle":"Contact and questions","legal.privacy.sectionContactBody":"If you have privacy questions, contact the maintainer via the GitHub profile in the footer or the email listed on the public Privacy Policy page.","settings.language":"Default language","settings.defaultPreferenceHelpLabel":"Default setting information","settings.defaultPreferenceHelpText":"This setting will be used by default on new devices where you sign in with this account.","settings.theme":"Default theme","settings.handedness":"Dominant hand","settings.storageLocation":"Data storage location","settings.openDriveFile":"Open file on Google Drive","settings.loggedAs":"Logged as:","settings.reminderEnabled":"Remind me to log my day","settings.reminderTime":"Reminder time","settings.reminderPermission":"Browser notifications","settings.reminderPermissionAction":"Enable notifications","settings.notificationsDefault":"Not decided","settings.notificationsGranted":"Enabled","settings.notificationsDenied":"Blocked","settings.notificationsUnsupported":"Unsupported","handedness.right":"Right","handedness.left":"Left","reminder.notificationTitle":"better being","reminder.notificationBody":"How did your day go? Add your rating."}};function Pr(e){let t=e;return{t:(i,s)=>{const a=Dr[t][i];return s?a.replace(/\{(\w+)\}/g,(l,r)=>s[r]??`{${r}}`):a},getLocale:()=>t,setLocale:i=>{t=i}}}function jr(){const e=zn(at(hs)??"");return e||(navigator.language.toLowerCase().startsWith("pl")?"pl":"en")}function zn(e){return En.includes(e)?e:null}function $i(e){rt(hs,e,31536e3)}function bn(){return"serviceWorker"in navigator&&"PushManager"in window&&"Notification"in window}async function Ti(e){const t=e.replace(/\/$/,""),n=await fetch(`${t}/api/push/public-key`);if(!n.ok)throw new Error(`push_public_key_failed_${n.status}`);const s=(await n.json()).publicKey??"";if(!s)throw new Error("missing_push_public_key");const a=await navigator.serviceWorker.ready,l=await a.pushManager.getSubscription();return l||await a.pushManager.subscribe({userVisibleOnly:!0,applicationServerKey:Rr(s)})}async function yn(e,t,n){const i=e.replace(/\/$/,""),s=await fetch(`${i}/api/push/subscriptions`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({subscription:t.toJSON(),locale:n.locale,timezoneOffsetMinutes:-new Date().getTimezoneOffset(),reminderEnabled:n.reminderEnabled,reminderTime:n.reminderTime})});if(!s.ok)throw new Error(`push_sync_failed_${s.status}`)}function Rr(e){const t="=".repeat((4-e.length%4)%4),n=(e+t).replace(/-/g,"+").replace(/_/g,"/"),i=atob(n),s=new Uint8Array(i.length);for(let a=0;a<i.length;++a)s[a]=i.charCodeAt(a);return s}const ms="being_better_reminder_enabled",ps="being_better_reminder_time",bs="being_better_last_reminder_date",Or={time:"20:00"};function Vt(e){return/^([01]\d|2[0-3]):[0-5]\d$/.test(e)?e:null}function Wr(){const e=at(ms)==="1",t=Vt(at(ps)??"");return{enabled:e,time:t??Or.time}}function xi(e){rt(ms,e.enabled?"1":"0",31536e3),rt(ps,e.time,31536e3)}function Nr(e,t){if(!e.enabled)return!1;const n=Vt(e.time);if(!n)return!1;const[i,s]=n.split(":"),a=Number(i),l=Number(s),r=new Date(t);if(r.setHours(a,l,0,0),t<r)return!1;const u=t.toISOString().slice(0,10);return window.localStorage.getItem(bs)!==u}function Gr(e){const t=e.toISOString().slice(0,10);window.localStorage.setItem(bs,t)}const ys="being_better_theme_preference",Br=["light","dark","system"];function Ur(){const e=An(at(ys)??"");return e||"system"}function An(e){return Br.includes(e)?e:null}function Rt(e){return e==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e}function Ci(e){rt(ys,e,31536e3)}function Ot(e){document.documentElement.dataset.theme=e}const Fr=["sleep","work","social","health","weather","cycle"],Mr=["calm","hopeful","tired","drained","focused","grateful","overwhelmed","steady","joyful","restless","clear","anxious"],Hr=new Set(["the","a","an","and","or","is","are","to","of","in","on","for","it","i","you"]),qr=new Set(["i","oraz","a","to","na","w","z","że","się","jest","dla","do"]),wn=["energy","stress","anxiety","joy"];function Kr(e){const t=Number(e.trim());return!Number.isInteger(t)||t<0||t>10?null:t}function vn(e){return e.trim().split(/\s+/).map(t=>t.trim()).filter(t=>t.length>0)}function ws(e){return e.toLowerCase().replace(/[^\p{L}\p{N}'-]+/gu,"")}function Vr(e,t){const n=t==="pl"?qr:Hr;return e.map(i=>ws(i)).filter(i=>i.length>0&&!n.has(i))}function Ii(e,t=new Date){const n=new Date(t),i=new Date(t);return e==="today"?i.setHours(0,0,0,0):e==="week"?(i.setDate(i.getDate()-6),i.setHours(0,0,0,0)):e==="month"?(i.setDate(i.getDate()-29),i.setHours(0,0,0,0)):i.setTime(0),{fromIso:i.toISOString(),toIso:n.toISOString()}}function Li(e,t){const n=new Map;for(const i of e){const s=[i.intensity.energy,i.intensity.stress,i.intensity.anxiety,i.intensity.joy].filter(u=>typeof u=="number"),l=1+(s.length>0?s.reduce((u,g)=>u+g,0)/s.length:0)/10,r=Vr(i.words,t);for(const u of r)n.set(u,(n.get(u)??0)+l)}return[...n.entries()].map(([i,s])=>({word:i,score:s})).sort((i,s)=>s.score-i.score||i.word.localeCompare(s.word))}function Yr(e,t,n=new Date){const i=new Map,s=new Map(wn.map(a=>[a,{total:0,count:0}]));for(const a of e){const l=new Date(a.timestamp);if(Number.isNaN(l.getTime()))continue;const r=Gn(Nn(l));i.set(r,(i.get(r)??0)+1);for(const u of wn){const g=a.intensity[u];if(typeof g!="number")continue;const h=s.get(u);h&&(h.total+=g,h.count+=1)}}return{totalCheckIns:e.length,activeDays:i.size,currentStreak:Zr(i,n),intensity:wn.map(a=>{const l=s.get(a);return!l||l.count===0?{key:a,average:null,sampleCount:0}:{key:a,average:Xr(l.total/l.count),sampleCount:l.count}}),dailyVolume:Jr(i,t,n),topContextTags:Ei(e.flatMap(a=>a.contextTags),8),topSuggestedWords:Ei(e.flatMap(a=>a.suggestedWordsUsed),8)}}function Wt(e){return e?"auth.connected":"auth.signIn"}function Sn(e,t){return t instanceof gs?{key:"status.missingClientId",isError:!0}:e==="indexeddb"?{key:"status.indexedDbUnavailable",isError:!0}:{key:"status.googleClientInitFailed",isError:!0}}function Jr(e,t,n){const i=Nn(n),s=new Date(i);s.setDate(s.getDate()-6);const a=[];for(let l=0;l<7;l+=1){const r=new Date(s);r.setDate(s.getDate()+l);const u=Gn(r);a.push({dayKey:u,dayLabel:r.toLocaleDateString(t,{weekday:"short",day:"2-digit",month:"2-digit"}),count:e.get(u)??0})}return a}function Zr(e,t){let n=0;const i=Nn(t);for(;e.has(Gn(i));)n+=1,i.setDate(i.getDate()-1);return n}function Ei(e,t){const n=new Map;for(const i of e){const s=ws(i);s&&n.set(s,(n.get(s)??0)+1)}return[...n.entries()].map(([i,s])=>({value:i,count:s})).sort((i,s)=>s.count-i.count||i.value.localeCompare(s.value)).slice(0,t)}function Xr(e){return Math.round(e*10)/10}function Nn(e){return new Date(e.getFullYear(),e.getMonth(),e.getDate())}function Gn(e){const t=e.getFullYear(),n=String(e.getMonth()+1).padStart(2,"0"),i=String(e.getDate()).padStart(2,"0");return`${t}-${n}-${i}`}var Qr=A('<button id=install-app class=btn type=button><span class=install-icon aria-hidden=true><svg viewBox="0 0 24 24"><path d="M12 3v10"></path><path d="m8 9 4 4 4-4"></path><path d="M4 15v4h16v-4"></path></svg></span><span class=install-label>'),eo=A('<div id=top-menu class=top-menu role=menu><div class=menu-item><span class=menu-label></span><div class=menu-nav><button id=menu-tab-entry type=button></button><button id=menu-tab-week type=button></button><button id=menu-tab-settings type=button></button></div></div><div class=menu-item><span class=menu-label></span><select id=locale class="locale-select menu-select"></select></div><div class=menu-item><span class=menu-label></span><select id=theme class="locale-select menu-select"><option value=light></option><option value=dark>'),to=A('<header class=top><div class=top-main><div class=title-with-page><h1 id=title></h1><span class=page-name></span></div><div class=top-actions-right><button id=menu-toggle class="btn menu-toggle"type=button aria-haspopup=menu aria-controls=top-menu><span class=menu-line></span><span class=menu-line></span><span class=menu-line>'),no=A("<option>"),io=A('<div class="menu-item menu-status"><span class=menu-label></span><span class=status-dot aria-hidden=true></span><span class=menu-value>'),so=A('<button id=signin class="btn btn-primary btn-signin menu-primary"type=button>');function ao(e){const[t,n]=P(!1);let i,s;return Se(()=>{if(!t())return;const a=r=>{const u=r.target;u&&(i?.contains(u)||s?.contains(u)||n(!1))},l=r=>{r.key==="Escape"&&(n(!1),s?.focus())};document.addEventListener("pointerdown",a),document.addEventListener("keydown",l),wt(()=>{document.removeEventListener("pointerdown",a),document.removeEventListener("keydown",l)})}),(()=>{var a=to(),l=a.firstChild,r=l.firstChild,u=r.firstChild,g=u.nextSibling,h=r.nextSibling,f=h.firstChild;we(u,"click",e.onTitleClick,!0),c(u,()=>e.t("app.title")),c(g,()=>e.pageLabel),c(h,N(ue,{get when(){return e.showInstall},get children(){var b=Qr(),z=b.firstChild,k=z.nextSibling;return we(b,"click",e.onInstall,!0),c(k,()=>e.installLabel),L(_=>{var I=e.installLabel,C=e.installDisabled;return I!==_.e&&V(b,"aria-label",_.e=I),C!==_.t&&(b.disabled=_.t=C),_},{e:void 0,t:void 0}),b}}),f),f.$$click=()=>{n(b=>!b)};var T=s;return typeof T=="function"?fi(T,f):s=f,c(a,N(ue,{get when(){return t()},get children(){var b=eo(),z=b.firstChild,k=z.firstChild,_=k.nextSibling,I=_.firstChild,C=I.nextSibling,B=C.nextSibling,S=z.nextSibling,$=S.firstChild,H=$.nextSibling,Q=S.nextSibling,ee=Q.firstChild,fe=ee.nextSibling,q=fe.firstChild,xe=q.nextSibling,ae=i;return typeof ae=="function"?fi(ae,b):i=b,c(k,()=>e.t("tabs.ariaLabel")),I.$$click=j=>{e.onEntryClick(j),n(!1)},c(I,()=>e.entryLabel),C.$$click=j=>{e.onWeekClick(j),n(!1)},c(C,()=>e.weekLabel),B.$$click=j=>{e.onSettingsClick(j),n(!1)},c(B,()=>e.settingsLabel),c($,()=>e.t("locale.label")),H.addEventListener("change",j=>{e.onLocaleChange(j),n(!1)}),c(H,()=>e.supportedLocales.map(j=>(()=>{var x=no();return x.value=j,c(x,()=>j.toUpperCase()),x})())),c(ee,()=>e.t("menu.theme")),fe.addEventListener("change",j=>{e.onThemeChange(j),n(!1)}),c(q,()=>e.t("theme.light")),c(xe,()=>e.t("theme.dark")),c(b,(()=>{var j=X(()=>!!e.isConnected);return()=>j()&&(()=>{var x=io(),D=x.firstChild,K=D.nextSibling,E=K.nextSibling;return c(D,()=>e.t("menu.account")),c(E,()=>e.accountLabel),L(()=>V(x,"aria-label",e.accountLabel)),x})()})(),null),c(b,(()=>{var j=X(()=>!!e.showSignIn);return()=>j()&&(()=>{var x=so();return x.$$click=D=>{e.onSignIn(D),n(!1)},c(x,()=>e.signInLabel),L(()=>x.disabled=e.signInDisabled),x})()})(),null),L(j=>{var x=`btn${e.activeTab==="entry"?" tab-active":""}`,D=e.entryDisabled,K=`btn${e.activeTab==="week"?" tab-active":""}`,E=e.weekDisabled,p=`btn${e.activeTab==="settings"?" tab-active":""}`;return x!==j.e&&ge(I,j.e=x),D!==j.t&&(I.disabled=j.t=D),K!==j.a&&ge(C,j.a=K),E!==j.o&&(C.disabled=j.o=E),p!==j.i&&ge(B,j.i=p),j},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0}),L(()=>H.value=e.locale),L(()=>fe.value=e.theme),b}}),null),L(b=>{var z=e.t("menu.toggle"),k=t();return z!==b.e&&V(f,"aria-label",b.e=z),k!==b.t&&V(f,"aria-expanded",b.t=k),b},{e:void 0,t:void 0}),a})()}St(["click"]);var ro=A('<section id=entry-view><form id=checkin-form class="card card-checkin"autocomplete=off><section class=checkin-section><label for=mood-words class=label-sm></label><textarea id=mood-words name=moodWords rows=3></textarea><p></p></section><section class="checkin-section suggested-words"><p class=label-sm></p><div class=chips></div></section><section class=checkin-section><div class=intensity-grid></div></section><section class="checkin-section context-tags"><p class=label-sm></p><div class=chips></div><div class=custom-tag-row><input id=custom-tag-input class=custom-tag-input><button type=button class=btn></button></div></section><section class="checkin-section checkin-section-submit"><button id=save-checkin class="btn btn-primary"type=submit>'),oo=A("<p class=word-limit-hint>"),lo=A("<button type=button class=chip>"),co=A("<label class=intensity-item><span class=label-sm></span><div class=slider-row><input type=range min=0 max=10 step=1><output>"),uo=A("<button type=button>"),go=A('<div class="chips selected-tags">'),fo=A('<button type=button class="chip chip-active">');function ho(e){return(()=>{var t=ro(),n=t.firstChild,i=n.firstChild,s=i.firstChild,a=s.nextSibling,l=a.nextSibling,r=i.nextSibling,u=r.firstChild,g=u.nextSibling,h=r.nextSibling,f=h.firstChild,T=h.nextSibling,b=T.firstChild,z=b.nextSibling,k=z.nextSibling,_=k.firstChild,I=_.nextSibling,C=T.nextSibling,B=C.firstChild;return we(n,"submit",e.onSubmit),c(s,()=>e.wordsLabel),we(a,"input",e.onWordsInput,!0),c(l,()=>e.wordCountLabel.replace("{count}",String(e.wordCount)).replace("{limit}",String(e.wordLimit))),c(i,(()=>{var S=X(()=>!!e.showWordLimitHint);return()=>S()&&(()=>{var $=oo();return c($,()=>e.softLimitHint),$})()})(),null),c(u,()=>e.suggestedWordsLabel),c(g,()=>e.suggestedWords.map(S=>(()=>{var $=lo();return $.$$click=()=>{e.onAddSuggestedWord(S.value)},c($,()=>S.label),$})())),c(f,()=>["energy","stress","anxiety","joy"].map(S=>(()=>{var $=co(),H=$.firstChild,Q=H.nextSibling,ee=Q.firstChild,fe=ee.nextSibling;return V($,"for",`intensity-${S}`),c(H,()=>e.intensityLabels[S]),ee.$$input=q=>{e.onIntensityInput(S,q.currentTarget.value)},V(ee,"id",`intensity-${S}`),c(fe,(()=>{var q=X(()=>e.intensity[S]===null);return()=>q()?"-/10":`${e.intensity[S]}/10`})()),L(()=>ge(fe,`rating-pill${e.intensity[S]===null?" rating-pill-empty":""}`)),L(()=>ee.value=String(e.intensity[S]??0)),$})())),c(b,()=>e.contextTagsLabel),c(z,()=>e.presetContextTags.map(S=>(()=>{var $=uo();return $.$$click=()=>{e.onTogglePresetTag(S.value)},c($,()=>S.label),L(()=>ge($,`chip${e.contextTags.includes(S.value)?" chip-active":""}`)),$})())),we(_,"input",e.onCustomTagInput,!0),I.$$click=()=>{e.onAddCustomTag()},c(I,()=>e.addTagLabel),c(T,(()=>{var S=X(()=>e.contextTags.length>0);return()=>S()&&(()=>{var $=go();return c($,()=>e.selectedContextTags.map(H=>(()=>{var Q=fo();return Q.$$click=()=>{e.onRemoveTag(H.value)},c(Q,()=>H.label),Q})())),$})()})(),null),c(B,()=>e.saveLabel),L(S=>{var $=`view${e.visible?"":" hidden"}`,H=e.wordsPlaceholder,Q=`word-count${e.showWordLimitHint?" is-over-limit":""}`,ee=e.customTagPlaceholder;return $!==S.e&&ge(t,S.e=$),H!==S.t&&V(a,"placeholder",S.t=H),Q!==S.a&&ge(l,S.a=Q),ee!==S.o&&V(_,"placeholder",S.o=ee),S},{e:void 0,t:void 0,a:void 0,o:void 0}),L(()=>a.value=e.wordsInputValue),L(()=>_.value=e.customTagValue),t})()}St(["input","click"]);var mo=A('<section id=settings-view><div class="card settings-card"><div class=setting-block><div class=setting-row><label for=settings-language class=label><span class=setting-help tabindex=0>?<span class=setting-help-tooltip role=tooltip></span></span></label><select id=settings-language class="locale-select setting-control"></select></div></div><div class=setting-block><div class=setting-row><label for=settings-theme class=label><span class=setting-help tabindex=0>?<span class=setting-help-tooltip role=tooltip></span></span></label><select id=settings-theme class="locale-select setting-control"><option value=light></option><option value=dark></option><option value=system></option></select></div></div><div class=setting-block><div class=setting-row><label for=settings-handedness class=label></label><select id=settings-handedness class="locale-select setting-control"><option value=right></option><option value=left></option></select></div></div><div class=setting-block><div class=setting-row><label for=settings-storage-backend class=label></label><select id=settings-storage-backend class="locale-select setting-control"><option value=google></option><option value=indexeddb></option></select></div><p class="status setting-status">'),po=A("<option>"),bo=A('<button type=button class="btn setting-action">'),yo=A('<a class="btn setting-action"target=_blank rel=noreferrer>'),wo=A("<p class=setting-note> "),vo=A('<div class=setting-block><div class=setting-row><label for=settings-reminder-enabled class=label></label><input id=settings-reminder-enabled class=setting-toggle type=checkbox></div><div><label for=settings-reminder-time class=label></label><input id=settings-reminder-time class=setting-control type=time></div><div class="setting-row setting-row-divider"><label for=settings-notifications-enabled class=label></label><input id=settings-notifications-enabled class=setting-toggle type=checkbox></div><div><p class=setting-note>');function So(e){return(()=>{var t=mo(),n=t.firstChild,i=n.firstChild,s=i.firstChild,a=s.firstChild,l=a.firstChild,r=l.firstChild,u=r.nextSibling,g=a.nextSibling,h=i.nextSibling,f=h.firstChild,T=f.firstChild,b=T.firstChild,z=b.firstChild,k=z.nextSibling,_=T.nextSibling,I=_.firstChild,C=I.nextSibling,B=C.nextSibling,S=h.nextSibling,$=S.firstChild,H=$.firstChild,Q=H.nextSibling,ee=Q.firstChild,fe=ee.nextSibling,q=S.nextSibling,xe=q.firstChild,ae=xe.firstChild,j=ae.nextSibling,x=j.firstChild,D=x.nextSibling,K=xe.nextSibling;return c(a,()=>e.languageLabel,l),c(u,()=>e.defaultPreferenceHelpText),we(g,"change",e.onLocaleChange),c(g,()=>e.supportedLocales.map(E=>(()=>{var p=po();return p.value=E,c(p,()=>E.toUpperCase()),p})())),c(T,()=>e.themeLabel,b),c(k,()=>e.defaultPreferenceHelpText),we(_,"change",e.onThemePreferenceChange),c(I,()=>e.themeOptionLightLabel),c(C,()=>e.themeOptionDarkLabel),c(B,()=>e.themeOptionSystemLabel),c(H,()=>e.handednessLabel),we(Q,"change",e.onHandednessChange),c(ee,()=>e.handednessRightLabel),c(fe,()=>e.handednessLeftLabel),c(ae,()=>e.storageLocationLabel),we(j,"change",e.onStorageBackendChange),c(x,()=>e.storageGoogleLabel),c(D,()=>e.storageIndexedDbLabel),c(q,(()=>{var E=X(()=>!!e.showStorageGoogleSignIn);return()=>E()?(()=>{var p=bo();return we(p,"click",e.onStorageGoogleSignIn,!0),c(p,()=>e.storageGoogleSignInLabel),L(()=>p.disabled=e.storageGoogleSignInDisabled),p})():null})(),K),c(q,(()=>{var E=X(()=>!!e.storageGoogleFileUrl);return()=>E()?(()=>{var p=yo();return c(p,()=>e.storageOpenDriveFileLabel),L(()=>V(p,"href",e.storageGoogleFileUrl)),p})():null})(),K),c(q,(()=>{var E=X(()=>!!e.storageGoogleAccountLabel);return()=>E()?(()=>{var p=wo(),W=p.firstChild;return c(p,()=>e.storageLoggedAsLabel,W),c(p,()=>e.storageGoogleAccountLabel,null),p})():null})(),K),c(K,()=>e.storageHelpText),c(n,(()=>{var E=X(()=>!!e.showReminderSettings);return()=>E()?(()=>{var p=vo(),W=p.firstChild,U=W.firstChild,M=U.nextSibling,te=W.nextSibling,ne=te.firstChild,re=ne.nextSibling,ke=te.nextSibling,Z=ke.firstChild,ye=Z.nextSibling,Ce=ke.nextSibling,Qe=Ce.firstChild;return c(U,()=>e.reminderEnabledLabel),we(M,"change",e.onReminderEnabledChange),c(ne,()=>e.reminderTimeLabel),we(re,"input",e.onReminderTimeChange,!0),c(Z,()=>e.reminderPermissionLabel),we(ye,"change",e.onNotificationsEnabledChange),c(Qe,()=>e.reminderPermissionStateLabel),L(_e=>{var ze=`setting-row setting-row-divider${e.reminderEnabled?"":" setting-row-disabled"}`,ot=!e.reminderEnabled,Fe=e.notificationsUnsupported,kt=`setting-row setting-row-divider${e.notificationsUnsupported?" setting-row-disabled":""}`;return ze!==_e.e&&ge(te,_e.e=ze),ot!==_e.t&&(re.disabled=_e.t=ot),Fe!==_e.a&&(ye.disabled=_e.a=Fe),kt!==_e.o&&ge(Ce,_e.o=kt),_e},{e:void 0,t:void 0,a:void 0,o:void 0}),L(()=>M.checked=e.reminderEnabled),L(()=>re.value=e.reminderTime),L(()=>ye.checked=e.notificationsEnabled),p})():null})(),null),L(E=>{var p=`view${e.visible?"":" hidden"}`,W=e.defaultPreferenceHelpLabel,U=e.defaultPreferenceHelpLabel;return p!==E.e&&ge(t,E.e=p),W!==E.t&&V(l,"aria-label",E.t=W),U!==E.a&&V(b,"aria-label",E.a=U),E},{e:void 0,t:void 0,a:void 0}),L(()=>g.value=e.locale),L(()=>_.value=e.themePreference),L(()=>Q.value=e.handedness),L(()=>j.value=e.storageBackendValue),t})()}St(["click","input"]);var ko=A("<div class=toast-viewport aria-live=polite aria-atomic=true>"),_o=A("<span class=toast-dot aria-hidden=true>"),$o=A("<div><span>");function To(e){return(()=>{var t=ko();return c(t,N(Aa,{get each(){return e.toasts},children:n=>(()=>{var i=$o(),s=i.firstChild;return c(i,N(ue,{get when(){return n.isError},get children(){return _o()}}),s),c(s,()=>n.text),L(a=>{var l=`toast${n.isError?" toast-error":""}`,r=n.isError?"alert":"status";return l!==a.e&&ge(i,a.e=l),r!==a.t&&V(i,"role",a.t=r),a},{e:void 0,t:void 0}),i})()})),t})()}var xo=A('<section id=week-view><div class=card><p id=chart-title class=label></p><label for=word-cloud-window class=label-sm></label><select id=word-cloud-window class=locale-select></select><div class=analytics-grid><article class=analytics-panel><p class="label-sm analytics-panel-title"></p><div class=analytics-kpis><p class=analytics-kpi><span></span><strong></strong></p><p class=analytics-kpi><span></span><strong></strong></p><p class=analytics-kpi><span></span><strong></strong></p></div><div class=intensity-summary></div></article><article class="analytics-panel analytics-panel-volume"><p class="label-sm analytics-panel-title"></p></article></div><div class=analytics-grid><article class=analytics-panel><p class="label-sm analytics-panel-title"></p></article><article class=analytics-panel><p class="label-sm analytics-panel-title">'),Co=A("<option>"),Nt=A("<p class=status>"),Io=A("<div class=word-cloud>"),Lo=A("<span class=cloud-word>"),Eo=A("<div class=intensity-summary-item><div class=intensity-summary-header><span></span><strong></strong></div><div class=intensity-summary-track><span class=intensity-summary-fill aria-hidden=true>"),zo=A("<div class=volume-chart-frame><div class=volume-chart-grid aria-hidden=true><span></span><span></span><span></span></div><div class=volume-chart>"),Ao=A("<div class=volume-column><span class=volume-count></span><span class=volume-bar></span><span class=volume-label>"),zi=A("<ul class=ranked-list>"),Ai=A("<li class=ranked-item><span class=ranked-label></span><span class=ranked-meter><span class=ranked-meter-fill aria-hidden=true></span></span><strong class=ranked-value>");function Do(e){const t=()=>e.words[0]?.score??1,n=()=>Math.max(1,...e.insights.dailyVolume.map(r=>r.count)),i=()=>Math.max(1,...e.insights.topContextTags.map(r=>r.count)),s=()=>Math.max(1,...e.insights.topSuggestedWords.map(r=>r.count)),a=r=>r===null?"-/10":`${r.toFixed(1)}/10`,l=()=>e.insights.dailyVolume.some(r=>r.count>0);return(()=>{var r=xo(),u=r.firstChild,g=u.firstChild,h=g.nextSibling,f=h.nextSibling,T=f.nextSibling,b=T.firstChild,z=b.firstChild,k=z.nextSibling,_=k.firstChild,I=_.firstChild,C=I.nextSibling,B=_.nextSibling,S=B.firstChild,$=S.nextSibling,H=B.nextSibling,Q=H.firstChild,ee=Q.nextSibling,fe=k.nextSibling,q=b.nextSibling,xe=q.firstChild,ae=T.nextSibling,j=ae.firstChild,x=j.firstChild,D=j.nextSibling,K=D.firstChild;return c(g,()=>e.title),c(h,()=>e.timeframeLabel),we(f,"change",e.onTimeframeChange),c(f,()=>e.timeframeOptions.map(E=>(()=>{var p=Co();return c(p,()=>E.label),L(()=>p.value=E.value),p})())),c(u,(()=>{var E=X(()=>e.words.length===0);return()=>E()?(()=>{var p=Nt();return c(p,()=>e.emptyLabel),p})():(()=>{var p=Io();return c(p,()=>e.words.map((W,U)=>{const te=.9+W.score/t()*1.6,ne=U*29%80;return(()=>{var re=Lo();return nt(re,"font-size",`${te}rem`),nt(re,"filter",`hue-rotate(${ne}deg)`),c(re,()=>W.word),re})()})),L(()=>V(p,"aria-label",e.title)),p})()})(),T),c(z,()=>e.summaryTitle),c(I,()=>e.totalCheckInsLabel),c(C,()=>e.insights.totalCheckIns),c(S,()=>e.activeDaysLabel),c($,()=>e.insights.activeDays),c(Q,()=>e.streakLabel),c(ee,()=>e.insights.currentStreak),c(fe,()=>e.insights.intensity.map(E=>(()=>{var p=Eo(),W=p.firstChild,U=W.firstChild,M=U.nextSibling,te=W.nextSibling,ne=te.firstChild;return c(U,()=>e.intensityLabels[E.key]),c(M,()=>a(E.average)),L(re=>nt(ne,"width",`${E.average===null?0:E.average/10*100}%`)),p})())),c(xe,()=>e.volumeTitle),c(q,(()=>{var E=X(()=>!l());return()=>E()?(()=>{var p=Nt();return c(p,()=>e.noVolumeLabel),p})():(()=>{var p=zo(),W=p.firstChild,U=W.nextSibling;return c(U,()=>e.insights.dailyVolume.map(M=>(()=>{var te=Ao(),ne=te.firstChild,re=ne.nextSibling,ke=re.nextSibling;return c(ne,()=>M.count),c(ke,()=>M.dayLabel),L(Z=>{var ye=`${Math.max(6,M.count/n()*100)}%`,Ce=`${M.dayLabel}: ${M.count}`;return ye!==Z.e&&nt(re,"height",Z.e=ye),Ce!==Z.t&&V(re,"aria-label",Z.t=Ce),Z},{e:void 0,t:void 0}),te})())),L(()=>V(U,"aria-label",e.volumeTitle)),p})()})(),null),c(x,()=>e.contextTagsTitle),c(j,(()=>{var E=X(()=>e.insights.topContextTags.length===0);return()=>E()?(()=>{var p=Nt();return c(p,()=>e.noTagsLabel),p})():(()=>{var p=zi();return c(p,()=>e.insights.topContextTags.map(W=>(()=>{var U=Ai(),M=U.firstChild,te=M.nextSibling,ne=te.firstChild,re=te.nextSibling;return c(M,()=>W.value),c(re,()=>W.count),L(ke=>nt(ne,"width",`${W.count/i()*100}%`)),U})())),p})()})(),null),c(K,()=>e.suggestedWordsTitle),c(D,(()=>{var E=X(()=>e.insights.topSuggestedWords.length===0);return()=>E()?(()=>{var p=Nt();return c(p,()=>e.noSuggestedWordsLabel),p})():(()=>{var p=zi();return c(p,()=>e.insights.topSuggestedWords.map(W=>(()=>{var U=Ai(),M=U.firstChild,te=M.nextSibling,ne=te.firstChild,re=te.nextSibling;return c(M,()=>W.value),c(re,()=>W.count),L(ke=>nt(ne,"width",`${W.count/s()*100}%`)),U})())),p})()})(),null),L(()=>ge(r,`view${e.visible?"":" hidden"}`)),L(()=>f.value=e.timeframe),r})()}var Po=A('<section id=hello-view class=view><article class="card first-run-intro"><h2 class=first-run-intro-title></h2><p class=first-run-intro-body></p><p class=first-run-intro-body></p><p class=first-run-intro-note></p><button class="btn btn-primary first-run-intro-begin"type=button>'),jo=A('<button class="btn btn-primary onboarding-option-btn"type=button>English'),Ro=A('<button class="btn onboarding-option-btn"type=button>Polski'),Ke=A('<button class="btn onboarding-option-btn"type=button>'),Di=A("<button type=button>"),Oo=A('<p class="status status-error onboarding-error-note">'),Wo=A('<button class="btn btn-primary onboarding-option-btn"type=button>'),No=A('<button class="btn onboarding-back-btn"type=button>'),Go=A('<section class=onboarding-overlay><article class="card onboarding-card"role=dialog aria-modal=true><h2 class=onboarding-title></h2><p class=onboarding-progress></p><p class=onboarding-note></p><div class=onboarding-options>'),Bo=A('<button class="btn backend-google-signin"type=button>'),Uo=A('<section class="card backend-gate"><h1 id=title class=backend-gate-brand></h1><h2 class=backend-gate-title></h2><p class=backend-gate-description></p><fieldset class=backend-gate-radios><legend class=backend-gate-legend></legend><label class=backend-radio><input type=radio name=backend value=google><span></span><span class=backend-help tabindex=0>?<span class=backend-help-tooltip role=tooltip></span></span></label><label class=backend-radio><input type=radio name=backend value=indexeddb><span></span><span class=backend-help tabindex=0>?<span class=backend-help-tooltip role=tooltip></span></span></label></fieldset><button class="btn btn-primary backend-confirm"type=button></button><p class=backend-privacy-note>'),Fo=A('<main class=shell><footer class=app-footer><div class=app-footer-legal><a class=app-footer-link></a><a class=app-footer-link></a><a class=app-footer-link target=_blank rel=noreferrer></a></div><p class=app-footer-copy></p><p class=app-footer-by>by <a class=app-footer-link href=https://github.com/piotrgredowski target=_blank rel=noreferrer>piotrgredowski</a> / <a class=app-footer-link href=https://github.com/notaproblemdotdev target=_blank rel=noreferrer>notaproblemdotdev</a></p><a class=app-footer-source href=https://github.com/notaproblemdotdev/being-better target=_blank rel=noreferrer><svg viewBox="0 0 24 24"role=img aria-hidden=true><path d="M12 .5C5.649.5.5 5.649.5 12c0 5.084 3.292 9.4 7.861 10.923.575.106.785-.25.785-.556 0-.274-.01-1.002-.016-1.967-3.198.695-3.873-1.54-3.873-1.54-.523-1.329-1.276-1.683-1.276-1.683-1.043-.713.08-.698.08-.698 1.153.081 1.76 1.185 1.76 1.185 1.024 1.756 2.688 1.249 3.344.955.104-.742.401-1.249.729-1.536-2.552-.291-5.236-1.276-5.236-5.682 0-1.255.449-2.281 1.185-3.085-.119-.291-.514-1.463.113-3.05 0 0 .966-.31 3.167 1.178a10.94 10.94 0 0 1 2.883-.387c.978.004 1.963.132 2.883.387 2.199-1.488 3.164-1.178 3.164-1.178.629 1.587.234 2.759.115 3.05.738.804 1.184 1.83 1.184 3.085 0 4.417-2.688 5.387-5.248 5.672.412.355.779 1.056.779 2.129 0 1.537-.014 2.777-.014 3.154 0 .309.207.668.79.555C20.21 21.396 23.5 17.082 23.5 12 23.5 5.649 18.351.5 12 .5Z">'),Mo=A('<section id=terms-view><article class="card legal-card"><h2></h2><p class=setting-note></p><div class=legal-locale-toggle role=group><button type=button>PL</button><button type=button>EN</button></div><h3></h3><p></p><h3></h3><p></p><h3></h3><p></p><h3></h3><p>'),Ho=A('<section id=privacy-view><article class="card legal-card"><h2></h2><p class=setting-note></p><h3></h3><p></p><h3></h3><p></p><h3></h3><p></p><h3></h3><p></p><h3></h3><p>');const kn=["language","theme","handedness","backend"],Pi="being_better_data_backend",vs="being_better_handedness",qo=["## Quick summary","What would you like to add, change, or fix?","","## Type","- [ ] Feature idea","- [ ] Bug report","- [ ] Improvement","","## Why this matters","What problem are you trying to solve?","","## Desired behavior","What should happen?","","## If this is a bug: steps to reproduce","1.","2.","3.","","## Context (optional)","- Language: English / Polish","- Device:","- Browser:","- Data mode: Google / Local","- Screenshot or screen recording:"].join(`
`),Ko=`https://github.com/notaproblemdotdev/being-better/issues/new?title=${encodeURIComponent("[Idea] ")}&body=${encodeURIComponent(qo)}`,st=(()=>{const e="/".trim();if(!e||e==="/")return"";const n=(e.startsWith("/")?e:`/${e}`).replace(/\/+$/,"");return n===""?"":n})();function ji(){return window.matchMedia("(display-mode: standalone)").matches||window.navigator.standalone===!0}function Vo(){return/iphone|ipad|ipod/i.test(window.navigator.userAgent)}function Yo(){const{protocol:e,hostname:t}=window.location;return e==="https:"||t==="localhost"||t==="127.0.0.1"}function Ri(){return"Notification"in window?Notification.permission:"unsupported"}const Oi="locale",Wi="theme_preference",Ni="handedness",Gi="onboarding_done",Bi="reminder_enabled",Ui="reminder_time",Jo="storage_backend";function Zo(e){return e.length>1&&e.endsWith("/")?e.slice(0,-1):e}function Xe(e){const t=Zo(e);return st?t===st?"/":t.startsWith(`${st}/`)?t.slice(st.length):t:t}function $e(e){return st?`${st}${e}`:e}function Fi(e){const t=Xe(e);return t==="/setup/language"?"language":t==="/setup/theme"?"theme":t==="/setup/handedness"?"handedness":t==="/setup/backend"||t==="/setup/backend/google"||t==="/setup/backend/indexeddb"?"backend":null}function _n(e){return Xe(e)==="/setup/intro"}function Mi(e){const t=Xe(e);return t==="/setup/backend/google"?"google":t==="/setup/backend/indexeddb"?"indexeddb":null}function $n(e,t){return e==="backend"?`/setup/backend/${t}`:`/setup/${e}`}function Xo(e){const t=Xe(e);return t==="/"||t==="/log-today"||t==="/record-this-moment"?"record-this-moment":t==="/past-data"?"past-data":t==="/settings"?"settings":t==="/terms"||t==="/terms.html"?"terms":t==="/privacy"||t==="/privacy.html"?"privacy":"record-this-moment"}function Qo(e){const t=Xe(e);return t==="/"||t==="/log-today"||t==="/record-this-moment"||t==="/past-data"||t==="/settings"||t==="/setup/intro"||t==="/setup/language"||t==="/setup/theme"||t==="/setup/handedness"||t==="/setup/backend"||t==="/setup/backend/google"||t==="/setup/backend/indexeddb"||t==="/terms"||t==="/terms.html"||t==="/privacy"||t==="/privacy.html"}function el(e){return e==="record-this-moment"?"/record-this-moment":e==="past-data"?"/past-data":e==="terms"?"/terms":e==="privacy"?"/privacy":"/settings"}function Tn(e){return e==="record-this-moment"?"entry":e==="past-data"?"week":e==="terms"||e==="privacy"?"settings":e}function Hi(e){return e==="1"||e==="true"?!0:e==="0"||e==="false"?!1:null}function Dn(e){return e==="left"||e==="right"?e:null}function tl(){try{return Dn(window.localStorage.getItem(vs)??void 0)??"right"}catch{return"right"}}function nl(){const e=Ka(),t=qa(),n=jr(),i=Pr(n),s=Ur(),a=Wr(),l=tl(),[r,u]=P(n),[g,h]=P(s),[f,T]=P(l),[b,z]=P(Rt(s)),[k,_]=P([]),[I,C]=P(!1),[B,S]=P(!1),$=G(()=>Xo(e.pathname)),[H,Q]=P(null),[ee,fe]=P(!1),[q,xe]=P(a.enabled),[ae,j]=P(a.time),[x,D]=P(Ri()),[K,E]=P(null),[p,W]=P(Ut(bt("VITE_DATA_BACKEND"))),[U,M]=P(null),[te,ne]=P(!1),[re,ke]=P(null),[Z,ye]=P("google"),[Ce,Qe]=P(!1),[_e,ze]=P(!1),[ot,Fe]=P(null),[kt,Bn]=P(null),[je,Un]=P(null),[ve,Ie]=P(null),[et,tt]=P(!1),[lt,Jt]=P(""),[ks,Fn]=P([]),[ct,dt]=P([]),[Mn,Zt]=P(""),[Hn,qn]=P({energy:null,stress:null,anxiety:null,joy:null}),[Kn,_s]=P("week"),[$s,Ts]=P([]),[xs,Cs]=P({totalCheckIns:0,activeDays:0,currentStreak:0,intensity:[{key:"energy",average:null,sampleCount:0},{key:"stress",average:null,sampleCount:0},{key:"anxiety",average:null,sampleCount:0},{key:"joy",average:null,sampleCount:0}],dailyVolume:[],topContextTags:[],topSuggestedWords:[]}),[Is,Vn]=P([]),_t=new Map;let Ls=1,Xt=0,ut=0,Qt=0,en=!1;const Re=bt("VITE_PUSH_API_BASE_URL")??bt("VITE_LOCAL_API_BASE_URL")??"",o=(d,m)=>(r(),i.t(d,m)),Yn=G(()=>vn(lt()).length),gt=G(()=>$()==="terms"||$()==="privacy"),tn=G(()=>!gt()&&!et()&&ve()===null),Jn=G(()=>ve()!==null&&!gt()),Zn=G(()=>ve()==="language"?o("onboarding.languageTitle"):ve()==="theme"?o("onboarding.themeTitle"):ve()==="backend"?o("onboarding.backendTitle"):o("onboarding.handednessTitle")),nn=G(()=>{const d=ve();return d?kn.indexOf(d):-1}),Es=G(()=>{const d=nn();return o("onboarding.progress",{current:String(d+1),total:String(kn.length)})}),Xn=G(()=>p()==="google"?je():p()==="indexeddb"&&U()==="google"?re():null),zs=G(()=>Xn()?.getSourceUrl?.()??null),Qn=G(()=>Xn()?.getAccountLabel?.()??null),As=G(()=>[...new Set([...Mr,...Is()])]),ei=G(()=>({sleep:o("form.contextTag.sleep"),work:o("form.contextTag.work"),social:o("form.contextTag.social"),health:o("form.contextTag.health"),weather:o("form.contextTag.weather"),cycle:o("form.contextTag.cycle")})),Ds=G(()=>({calm:o("form.suggestedWord.calm"),hopeful:o("form.suggestedWord.hopeful"),tired:o("form.suggestedWord.tired"),drained:o("form.suggestedWord.drained"),focused:o("form.suggestedWord.focused"),grateful:o("form.suggestedWord.grateful"),overwhelmed:o("form.suggestedWord.overwhelmed"),steady:o("form.suggestedWord.steady"),joyful:o("form.suggestedWord.joyful"),restless:o("form.suggestedWord.restless"),clear:o("form.suggestedWord.clear"),anxious:o("form.suggestedWord.anxious"),excited:o("form.suggestedWord.excited"),happy:o("form.suggestedWord.happy")}));Ot(b());const R=(d,m=!1,y=!0)=>{if(!y)return;const O=Ls++;_(me=>[...me,{id:O,text:d,isError:m}]);const Y=window.setTimeout(()=>{_(me=>me.filter(Le=>Le.id!==O)),_t.delete(O)},m?4500:3200);_t.set(O,Y)},ti=()=>{C(!0),S(!1)},Ps=d=>({[Oi]:r(),[Wi]:g(),[Ni]:f(),[Gi]:et()?"1":"0",[Bi]:q()?"1":"0",[Ui]:ae(),[Jo]:d??p()??"google"}),Ae=async(d=je(),m)=>{if(!(en||!d?.saveSettings||!d.isReady()))try{await d.saveSettings(Ps(m))}catch(y){console.error(y)}},js=async(d,m)=>{if(d.loadSettings)try{const y=await d.loadSettings();if(m())return;en=!0;const O=zn(y[Oi]??"");O&&O!==r()&&(i.setLocale(O),$i(O),u(O));const Y=An(y[Wi]??"");if(Y&&Y!==g()){Ci(Y),h(Y);const se=Rt(Y);Ot(se),z(se)}const me=Dn(y[Ni]??"");me&&me!==f()&&sn(me);const Le=Hi(y[Gi]);Le!==null&&Le!==et()&&(tt(Le),Le&&Ie(null));const oe=Hi(y[Bi]),Ee=Vt(y[Ui]??""),v=oe??q(),ie=Ee??ae();(v!==q()||ie!==ae())&&(xe(v),j(ie),xi({enabled:v,time:ie}),rn(v,ie))}catch(y){console.error(y)}finally{en=!1}},$t=async()=>{const d=je();if(!(!d||!d.isReady()))try{const m=Ii(Kn(),new Date),y=await d.listCheckIns(m);Ts(Li(y,r())),Cs(Yr(y,r(),new Date))}catch(m){console.error(m),R(o("status.cloudLoadFailed"),!0)}},Rs=async()=>{const d=je();if(!(!d||!d.isReady()))try{const m=Ii("all-time",new Date),y=await d.listCheckIns(m),O=Li(y,r()).slice(0,6).map(Y=>Y.word);Vn(O)}catch{Vn([])}},sn=d=>{T(d);try{window.localStorage.setItem(vs,d)}catch{}},an=async d=>{const m=Rt(d);h(d),Ci(d),Ot(m),z(m),await Ae()},Os=async d=>{d!==r()&&(i.setLocale(d),$i(d),u(d),Tn($())==="week"&&await $t(),await Ae())},rn=async(d,m)=>{if(!Re||!bn())return;const y=K();if(y)try{await yn(Re,y,{reminderEnabled:d,reminderTime:m,locale:r()})}catch(O){console.error(O),R(o("status.pushSyncFailed"),!0)}},on=(d,m)=>{const y=Vt(m)??"20:00";xe(d),j(y),xi({enabled:d,time:y}),rn(d,y),Ae()},ln=()=>{const d=new Date;if(!Nr({enabled:q(),time:ae()},d))return;Gr(d);const m=Ri();if(D(m),m==="granted"){new Notification(o("reminder.notificationTitle"),{body:o("reminder.notificationBody")}),R(o("status.reminderSent"));return}if(m==="unsupported"){R(o("status.reminderDue"));return}R(o("status.reminderPermissionNeeded"),!0)};async function Ws(d,m,y){const O=()=>y!==Xt||p()!==m||je()!==d;R(o("status.waitingForLogin"),!1,!1);try{if(await d.init(),O())return;if(d.getAuthState()==="connected"){if(await js(d,O),O()||(await Ae(d),O()))return;ti(),R(o(m==="google"?"status.sessionRestored":"status.connected"),!1,!1);return}S(!0),R(o("status.clickSignIn",{signIn:o("auth.signIn")}),!1,!1)}catch(Y){if(O())return;console.error(Y);const me=Sn(m,Y);R(o(me.key),me.isError),S(!1)}}async function ni(d){const m=()=>d!==ut||p()!==null||Z()!=="google",y=pn("google");Bn(y),Qe(!1),ze(!1),Fe(null);try{if(await y.init(),m())return;if(y.getAuthState()==="connected"){Qe(!0),ze(!1),Fe(null);return}ze(!0),Fe(null)}catch(O){if(m())return;console.error(O);const Y=Sn("google",O);R(o(Y.key),Y.isError),ze(!1),Fe(o(Y.key))}}async function Ns(d){const m=()=>d!==Qt||U()!=="google"||p()!=="indexeddb",y=pn("google");ke(y),ne(!1);try{if(await y.init(),m())return;if(y.getAuthState()==="connected"){ft("google"),M(null),ke(null),R(o("status.storageLocationUpdated"));return}ne(!0)}catch(O){if(m())return;console.error(O);const Y=Sn("google",O);R(o(Y.key),Y.isError),ne(!1)}}wa(()=>{if(!p()){const oe=Ut(at(Pi)??void 0);oe?W(oe):ye("google")}if(_n(e.pathname))tt(!1),Ie(null);else{const oe=Fi(e.pathname);oe&&(tt(!1),Ie(oe))}const d=Mi(e.pathname);d&&ye(d);const m=ji();fe(m);const y=oe=>{oe.preventDefault(),Q(oe)},O=()=>{Q(null),fe(!0),R(o("status.appInstalled"),!1,!1)},Y=window.matchMedia("(prefers-color-scheme: dark)"),me=()=>{if(g()==="system"){const oe=Rt("system");Ot(oe),z(oe)}};window.addEventListener("beforeinstallprompt",y),window.addEventListener("appinstalled",O),Y.addEventListener("change",me),ln(),Re&&bn()&&navigator.serviceWorker.ready.then(async oe=>{let Ee=await oe.pushManager.getSubscription();if(!Ee&&Notification.permission==="granted")try{Ee=await Ti(Re)}catch(v){console.error(v)}if(Ee){E(Ee);try{await yn(Re,Ee,{reminderEnabled:q(),reminderTime:ae(),locale:r()})}catch(v){console.error(v)}}});const Le=window.setInterval(ln,3e4);wt(()=>{window.removeEventListener("beforeinstallprompt",y),window.removeEventListener("appinstalled",O),Y.removeEventListener("change",me),window.clearInterval(Le);for(const oe of _t.values())window.clearTimeout(oe);_t.clear()})}),Se(()=>{const d=p();Xt+=1;const m=Xt;if(!d){Un(null),C(!1),S(!1);return}const y=pn(d);Un(y),C(!1),S(!1),Ws(y,d,m)}),Se(()=>{if(p()!==null)return;if(Z()!=="google"){Bn(null),Qe(!1),ze(!1);return}ut+=1,ni(ut)}),Se(()=>{p()!=="indexeddb"&&U()!==null&&(M(null),ke(null),ne(!1))}),Se(()=>{!ee()&&q()&&on(!1,ae())}),Se(()=>{Xe(e.pathname)==="/log-today"&&t($e("/record-this-moment"),{replace:!0})}),Se(()=>{Qo(e.pathname)||t($e("/"),{replace:!0})}),Se(()=>{e.search&&t(e.pathname,{replace:!0})}),Se(()=>{if(et()||gt())return;const d=ve(),m=_n(e.pathname);if(!(!d&&m)){if(!d&&!m){t($e("/setup/intro"),{replace:!0});return}if(d){const y=$n(d,Z());Xe(e.pathname)!==y&&t($e(y),{replace:!0})}}}),Se(()=>{const d=Fi(e.pathname);d?(et()&&tt(!1),ve()!==d&&Ie(d)):_n(e.pathname)&&(et()&&tt(!1),ve()!==null&&Ie(null));const m=Mi(e.pathname);m&&Z()!==m&&ye(m)}),Se(()=>{$()==="past-data"&&$t()}),Se(()=>{$()==="record-this-moment"&&I()&&Rs()});const Gs=async()=>{const d=je();if(d?.requestSignIn){R(o("status.openingGoogleLogin"));try{await d.requestSignIn(),ti(),R(o("status.connected"))}catch(m){console.error(m),R(o("status.authRejected"),!0)}}},Tt=d=>{t($e(el(d)))},ii=()=>{Tt("record-this-moment")},Bs=()=>{Tt("past-data")},Us=()=>{Tt("settings")},Fs=async d=>{d.preventDefault();const m=je();if(!m||!m.isReady()){R(o("status.signInFirst"),!0);return}const y=vn(lt());if(y.length===0){R(o("status.wordsRequired"),!0);return}try{R(o("status.savingCheckIn")),await m.appendCheckIn({timestamp:new Date().toISOString(),words:y,suggestedWordsUsed:ks(),intensity:Hn(),contextTags:ct()}),Jt(""),Fn([]),dt([]),Zt(""),qn({energy:null,stress:null,anxiety:null,joy:null}),R(o("status.checkInSaved")),Tn($())==="week"&&await $t()}catch(O){console.error(O),R(o("status.checkInSaveFailed"),!0)}},Ms=d=>{const m=vn(lt());m.includes(d)||(Jt(m.length===0?d:`${lt().trim()} ${d}`),Fn(y=>y.includes(d)?y:[...y,d]))},Hs=(d,m)=>{const y=Kr(m);y!==null&&qn(O=>({...O,[d]:y}))},qs=d=>{const m=d.trim().toLowerCase();!m||ct().includes(m)||dt(y=>[...y,m])},Ks=d=>{if(ct().includes(d)){dt(m=>m.filter(y=>y!==d));return}dt(m=>[...m,d])},Vs=()=>{qs(Mn()),Zt("")},Ys=async d=>{const y=d.currentTarget.value;_s(y),await $t()},xt=async d=>{await Os(d),await rn(q(),ae())},si=async d=>{const m=d.currentTarget,y=zn(m.value)??"en";await xt(y)},Js=async d=>{const m=d.currentTarget,y=An(m.value)??"system";await an(y)},Zs=d=>{const m=d.currentTarget,y=Dn(m.value);y&&(sn(y),Ae())},Xs=async d=>{const y=d.currentTarget.value==="dark"?"dark":"light";await an(y)},Qs=d=>{if(!ee())return;const m=d.currentTarget;on(m.checked,ae())},ea=d=>{const m=d.currentTarget;on(q(),m.value)},ta=d=>{if(d.currentTarget.checked){sa();return}x()==="granted"&&R(o("status.reminderPermissionManagedByBrowser"),!0)},na=d=>{const m=d.currentTarget,y=Ut(m.value);if(y){if(y==="indexeddb"){p()==="google"&&Ae(je(),"indexeddb"),M(null),ke(null),ne(!1),p()!=="indexeddb"&&(ft("indexeddb"),R(o("status.storageLocationUpdated")));return}if(p()==="google"){M(null);return}M("google"),Qt+=1,Ns(Qt)}},ia=async()=>{const d=re();if(!(!d?.requestSignIn||U()!=="google")){R(o("status.openingGoogleLogin"));try{await d.requestSignIn(),ft("google"),M(null),ke(null),ne(!1),R(o("status.storageLocationUpdated"))}catch(m){console.error(m),R(o("status.authRejected"),!0)}}},sa=async()=>{if(!("Notification"in window)){D("unsupported"),R(o("status.reminderNotificationsUnsupported"),!0);return}const d=await Notification.requestPermission();if(D(d),d==="granted"){if(Re&&bn())try{const m=await Ti(Re);E(m),await yn(Re,m,{reminderEnabled:q(),reminderTime:ae(),locale:r()})}catch(m){console.error(m),R(o("status.pushSetupFailed"),!0);return}R(o("status.reminderPermissionGranted")),ln();return}R(o("status.reminderPermissionDenied"),!0)},aa=async()=>{if(ji()){fe(!0),R(o("status.appInstalled"));return}const d=H();if(d){await d.prompt(),(await d.userChoice).outcome==="accepted"?R(o("status.installAccepted")):R(o("status.installDismissed")),Q(null);return}if(Vo()){R(o("status.installIosHint"));return}if(!Yo()){R(o("status.installNeedsHttps"),!0);return}R(o("status.installUseBrowserMenu"))},ft=d=>{W(d),rt(Pi,d,31536e3),d==="google"&&Ae()},ra=()=>{Ie("language"),t($e("/setup/language"),{replace:!0})},oa=()=>{tt(!0),Ie(null),Ae(),p()!==null&&Tt("record-this-moment")},ai=d=>{xt(d),Ie("theme"),t($e("/setup/theme"),{replace:!0})},cn=d=>{an(d),Ie("handedness"),t($e("/setup/handedness"),{replace:!0})},ri=d=>{sn(d),Ae(),Ie("backend"),t($e($n("backend",Z())),{replace:!0})},la=()=>{Ct()&&(ft(Z()),oa())},ca=()=>{ut+=1,ni(ut)},da=()=>{const d=nn();if(d<=0)return;const m=kn[d-1];Ie(m),t($e($n(m,Z())),{replace:!0})},oi=async()=>{const d=kt();if(d?.requestSignIn){R(o("status.openingGoogleLogin"));try{await d.requestSignIn(),Qe(!0),ze(!1),R(o("status.connected"),!1,!1)}catch(m){console.error(m),R(o("status.authRejected"),!0)}}},Ct=()=>Z()==="indexeddb"?!0:Ce(),ua=()=>{Ct()&&ft(Z())},ga=()=>x()==="unsupported"?o("settings.notificationsUnsupported"):x()==="granted"?o("settings.notificationsGranted"):x()==="denied"?o("settings.notificationsDenied"):o("settings.notificationsDefault");return(()=>{var d=Fo(),m=d.firstChild,y=m.firstChild,O=y.firstChild,Y=O.nextSibling,me=Y.nextSibling,Le=y.nextSibling,oe=Le.nextSibling,Ee=oe.nextSibling;return c(d,N(ue,{get when(){return tn()},get fallback(){return N(ue,{get when(){return X(()=>p()===null)()&&!gt()},get fallback(){return N(ue,{get when(){return!tn()},get children(){return[N(ao,{get locale(){return r()},supportedLocales:En,t:o,get theme(){return b()},get pageLabel(){return X(()=>$()==="record-this-moment")()?o("tabs.entry"):X(()=>$()==="past-data")()?o("tabs.week"):X(()=>$()==="terms")()?o("legal.termsTitle"):X(()=>$()==="privacy")()?o("legal.privacyTitle"):o("tabs.settings")},get isConnected(){return I()},get showSignIn(){return X(()=>!I())()&&p()!==null},get signInLabel(){return o(Wt(I()))},get accountLabel(){return Qn()??o(Wt(I()))},get signInDisabled(){return I()||!B()},get activeTab(){return Tn($())},get entryLabel(){return o("tabs.entry")},get weekLabel(){return o("tabs.week")},get settingsLabel(){return o("tabs.settings")},get entryDisabled(){return!I()},get weekDisabled(){return!I()},get showInstall(){return!ee()},get installLabel(){return X(()=>!!ee())()?o("install.installed"):o("install.installApp")},get installDisabled(){return ee()},onLocaleChange:v=>{si(v)},onThemeChange:v=>{Xs(v)},onSignIn:()=>{Gs()},onInstall:()=>{aa()},onTitleClick:ii,onEntryClick:ii,onWeekClick:Bs,onSettingsClick:Us}),N(ho,{get visible(){return $()==="record-this-moment"},get wordsLabel(){return o("form.words")},get wordsPlaceholder(){return o("form.wordsPlaceholder")},get wordCountLabel(){return o("form.wordCount")},get suggestedWordsLabel(){return o("form.suggestedWords")},get intensityLabels(){return{energy:o("form.energy"),stress:o("form.stress"),anxiety:o("form.anxiety"),joy:o("form.joy")}},get contextTagsLabel(){return o("form.contextTags")},get customTagPlaceholder(){return o("form.customTagPlaceholder")},get addTagLabel(){return o("form.addTag")},get saveLabel(){return o("form.save")},get softLimitHint(){return o("form.wordLimitHint")},get wordsInputValue(){return lt()},get wordCount(){return Yn()},wordLimit:20,get showWordLimitHint(){return Yn()>20},get suggestedWords(){return As().map(v=>({value:v,label:Ds()[v]??v}))},get contextTags(){return ct()},get presetContextTags(){return Fr.map(v=>({value:v,label:ei()[v]}))},get selectedContextTags(){return ct().map(v=>({value:v,label:ei()[v]??v}))},get customTagValue(){return Mn()},get intensity(){return Hn()},onWordsInput:v=>{Jt(v.currentTarget.value)},onAddSuggestedWord:Ms,onIntensityInput:Hs,onTogglePresetTag:Ks,onCustomTagInput:v=>{Zt(v.currentTarget.value)},onAddCustomTag:()=>{Vs()},onRemoveTag:v=>{dt(ie=>ie.filter(se=>se!==v))},onSubmit:v=>{Fs(v)}}),N(Do,{get visible(){return $()==="past-data"},get title(){return o("cloud.title")},get emptyLabel(){return o("cloud.empty")},get summaryTitle(){return o("analytics.summaryTitle")},get totalCheckInsLabel(){return o("analytics.totalCheckIns")},get activeDaysLabel(){return o("analytics.activeDays")},get streakLabel(){return o("analytics.currentStreak")},get volumeTitle(){return o("analytics.volumeTitle")},get noVolumeLabel(){return o("analytics.noVolume")},get contextTagsTitle(){return o("analytics.contextTagsTitle")},get suggestedWordsTitle(){return o("analytics.suggestedWordsTitle")},get noTagsLabel(){return o("analytics.noTags")},get noSuggestedWordsLabel(){return o("analytics.noSuggestedWords")},get timeframeLabel(){return o("cloud.timeframe")},get timeframe(){return Kn()},get words(){return $s()},get insights(){return xs()},get intensityLabels(){return{energy:o("form.energy"),stress:o("form.stress"),anxiety:o("form.anxiety"),joy:o("form.joy")}},get timeframeOptions(){return[{value:"today",label:o("cloud.today")},{value:"week",label:o("cloud.week")},{value:"month",label:o("cloud.month")},{value:"all-time",label:o("cloud.allTime")}]},onTimeframeChange:v=>{Ys(v)}}),N(So,{get visible(){return $()==="settings"},get languageLabel(){return o("settings.language")},get defaultPreferenceHelpLabel(){return o("settings.defaultPreferenceHelpLabel")},get defaultPreferenceHelpText(){return o("settings.defaultPreferenceHelpText")},get themeLabel(){return o("settings.theme")},get handednessLabel(){return o("settings.handedness")},get handednessRightLabel(){return o("handedness.right")},get handednessLeftLabel(){return o("handedness.left")},get storageLocationLabel(){return o("settings.storageLocation")},get storageGoogleLabel(){return o("backend.google")},get storageIndexedDbLabel(){return o("backend.indexedDb")},get storageHelpText(){return X(()=>(U()??p())==="google")()?o("backend.storageNoteGoogle"):o("backend.storageNoteIndexedDb")},get storageGoogleSignInLabel(){return o("auth.signIn")},get showStorageGoogleSignIn(){return X(()=>U()==="google")()&&p()!=="google"},get storageGoogleSignInDisabled(){return!te()},get storageGoogleFileUrl(){return zs()},get storageOpenDriveFileLabel(){return o("settings.openDriveFile")},get storageLoggedAsLabel(){return o("settings.loggedAs")},get storageGoogleAccountLabel(){return Qn()},get reminderEnabledLabel(){return o("settings.reminderEnabled")},get reminderTimeLabel(){return o("settings.reminderTime")},get reminderPermissionLabel(){return o("settings.reminderPermission")},get reminderPermissionStateLabel(){return ga()},get themeOptionLightLabel(){return o("theme.light")},get themeOptionDarkLabel(){return o("theme.dark")},get themeOptionSystemLabel(){return o("theme.system")},get locale(){return r()},supportedLocales:En,get themePreference(){return g()},get handedness(){return f()},get storageBackend(){return p()??"google"},get storageBackendValue(){return U()??p()??"google"},get showReminderSettings(){return ee()},get reminderEnabled(){return q()},get reminderTime(){return ae()},get notificationsEnabled(){return x()==="granted"},get notificationsUnsupported(){return x()==="unsupported"},onLocaleChange:v=>{si(v)},onThemePreferenceChange:v=>{Js(v)},onHandednessChange:Zs,onStorageBackendChange:na,onStorageGoogleSignIn:()=>{ia()},onReminderEnabledChange:Qs,onReminderTimeChange:ea,onNotificationsEnabledChange:ta}),(()=>{var v=Mo(),ie=v.firstChild,se=ie.firstChild,he=se.nextSibling,ce=he.nextSibling,de=ce.firstChild,w=de.nextSibling,De=ce.nextSibling,Oe=De.nextSibling,We=Oe.nextSibling,Me=We.nextSibling,He=Me.nextSibling,qe=He.nextSibling,Ne=qe.nextSibling,It=Ne.nextSibling;return c(se,()=>o("legal.termsTitle")),c(he,()=>o("legal.lastUpdated")),de.$$click=()=>{xt("pl")},w.$$click=()=>{xt("en")},c(De,()=>o("legal.terms.sectionUseTitle")),c(Oe,()=>o("legal.terms.sectionUseBody")),c(We,()=>o("legal.terms.sectionDataTitle")),c(Me,()=>o("legal.terms.sectionDataBody")),c(He,()=>o("legal.terms.sectionAvailabilityTitle")),c(qe,()=>o("legal.terms.sectionAvailabilityBody")),c(Ne,()=>o("legal.terms.sectionContactTitle")),c(It,()=>o("legal.terms.sectionContactBody")),L(pe=>{var Lt=`view${$()==="terms"?"":" hidden"}`,Et=o("locale.label"),Ge=`btn legal-locale-btn${r()==="pl"?" tab-active":""}`,zt=r()==="pl",le=`btn legal-locale-btn${r()==="en"?" tab-active":""}`,ht=r()==="en";return Lt!==pe.e&&ge(v,pe.e=Lt),Et!==pe.t&&V(ce,"aria-label",pe.t=Et),Ge!==pe.a&&ge(de,pe.a=Ge),zt!==pe.o&&V(de,"aria-pressed",pe.o=zt),le!==pe.i&&ge(w,pe.i=le),ht!==pe.n&&V(w,"aria-pressed",pe.n=ht),pe},{e:void 0,t:void 0,a:void 0,o:void 0,i:void 0,n:void 0}),v})(),(()=>{var v=Ho(),ie=v.firstChild,se=ie.firstChild,he=se.nextSibling,ce=he.nextSibling,de=ce.nextSibling,w=de.nextSibling,De=w.nextSibling,Oe=De.nextSibling,We=Oe.nextSibling,Me=We.nextSibling,He=Me.nextSibling,qe=He.nextSibling,Ne=qe.nextSibling;return c(se,()=>o("legal.privacyTitle")),c(he,()=>o("legal.lastUpdated")),c(ce,()=>o("legal.privacy.sectionCollectedTitle")),c(de,()=>o("legal.privacy.sectionCollectedBody")),c(w,()=>o("legal.privacy.sectionUsageTitle")),c(De,()=>o("legal.privacy.sectionUsageBody")),c(Oe,()=>o("legal.privacy.sectionStorageTitle")),c(We,()=>o("legal.privacy.sectionStorageBody")),c(Me,()=>o("legal.privacy.sectionRightsTitle")),c(He,()=>o("legal.privacy.sectionRightsBody")),c(qe,()=>o("legal.privacy.sectionContactTitle")),c(Ne,()=>o("legal.privacy.sectionContactBody")),L(()=>ge(v,`view${$()==="privacy"?"":" hidden"}`)),v})()]}})},get children(){return[]}})},get children(){var v=Po(),ie=v.firstChild,se=ie.firstChild,he=se.nextSibling,ce=he.nextSibling,de=ce.nextSibling,w=de.nextSibling;return c(se,()=>o("intro.title")),c(he,()=>o("intro.body")),c(ce,()=>o("intro.dataOwnership")),c(de,()=>o("intro.legalHint")),w.$$click=ra,c(w,()=>o("intro.begin")),v}}),m),c(d,N(ue,{get when(){return Jn()},get children(){var v=Go(),ie=v.firstChild,se=ie.firstChild,he=se.nextSibling,ce=he.nextSibling,de=ce.nextSibling;return c(se,Zn),c(he,Es),c(ce,()=>o("onboarding.changeLater")),c(de,N(ue,{get when(){return ve()==="language"},get children(){return[(()=>{var w=jo();return w.$$click=()=>ai("en"),w})(),(()=>{var w=Ro();return w.$$click=()=>ai("pl"),w})()]}}),null),c(de,N(ue,{get when(){return ve()==="theme"},get children(){return[(()=>{var w=Ke();return w.$$click=()=>cn("light"),c(w,()=>o("theme.light")),w})(),(()=>{var w=Ke();return w.$$click=()=>cn("dark"),c(w,()=>o("theme.dark")),w})(),(()=>{var w=Ke();return w.$$click=()=>cn("system"),c(w,()=>o("theme.system")),w})()]}}),null),c(de,N(ue,{get when(){return ve()==="handedness"},get children(){return[(()=>{var w=Ke();return w.$$click=()=>ri("right"),c(w,()=>o("handedness.right")),w})(),(()=>{var w=Ke();return w.$$click=()=>ri("left"),c(w,()=>o("handedness.left")),w})()]}}),null),c(de,N(ue,{get when(){return ve()==="backend"},get children(){return[(()=>{var w=Di();return w.$$click=()=>ye("google"),c(w,()=>o("backend.google")),L(()=>ge(w,`btn onboarding-option-btn${Z()==="google"?" btn-primary":""}`)),w})(),(()=>{var w=Di();return w.$$click=()=>ye("indexeddb"),c(w,()=>o("backend.indexedDb")),L(()=>ge(w,`btn onboarding-option-btn${Z()==="indexeddb"?" btn-primary":""}`)),w})(),N(ue,{get when(){return Z()==="google"},get children(){return[(()=>{var w=Ke();return w.$$click=()=>{oi()},c(w,()=>o(Wt(Ce()))),L(()=>w.disabled=!Ce()&&!_e()),w})(),N(ue,{get when(){return ot()},get children(){return[(()=>{var w=Oo();return c(w,ot),w})(),(()=>{var w=Ke();return w.$$click=ca,c(w,()=>o("onboarding.retryGoogle")),w})()]}})]}}),(()=>{var w=Wo();return w.$$click=la,c(w,()=>o("backend.confirm")),L(()=>w.disabled=!Ct()),w})()]}}),null),c(ie,N(ue,{get when(){return nn()>0},get children(){var w=No();return w.$$click=da,c(w,()=>o("onboarding.back")),w}}),null),L(()=>V(ie,"aria-label",Zn())),v}}),m),c(d,N(ue,{get when(){return X(()=>p()===null&&!gt()&&!tn())()&&!Jn()},get children(){var v=Uo(),ie=v.firstChild,se=ie.nextSibling,he=se.nextSibling,ce=he.nextSibling,de=ce.firstChild,w=de.nextSibling,De=w.firstChild,Oe=De.nextSibling,We=Oe.nextSibling,Me=We.firstChild,He=Me.nextSibling,qe=w.nextSibling,Ne=qe.firstChild,It=Ne.nextSibling,pe=It.nextSibling,Lt=pe.firstChild,Et=Lt.nextSibling,Ge=ce.nextSibling,zt=Ge.nextSibling;return c(ie,()=>o("app.title")),c(se,()=>o("backend.title")),c(he,()=>o("backend.description")),c(de,()=>o("backend.ariaLabel")),De.addEventListener("change",()=>ye("google")),c(Oe,()=>o("backend.google")),c(He,()=>o("backend.googleHelpText")),Ne.addEventListener("change",()=>ye("indexeddb")),c(It,()=>o("backend.indexedDb")),c(Et,()=>o("backend.indexedDbHelpText")),c(v,N(ue,{get when(){return Z()==="google"},get children(){var le=Bo();return le.$$click=()=>{oi()},c(le,()=>o(Wt(Ce()))),L(()=>le.disabled=!Ce()&&!_e()),le}}),Ge),Ge.$$click=ua,c(Ge,()=>o("backend.confirm")),c(zt,(()=>{var le=X(()=>Z()==="google");return()=>le()?o("backend.storageNoteGoogle"):o("backend.storageNoteIndexedDb")})()),L(le=>{var ht=o("backend.ariaLabel"),li=o("backend.googleHelpLabel"),ci=o("backend.indexedDbHelpLabel"),di=!Ct();return ht!==le.e&&V(v,"aria-label",le.e=ht),li!==le.t&&V(We,"aria-label",le.t=li),ci!==le.a&&V(pe,"aria-label",le.a=ci),di!==le.o&&(Ge.disabled=le.o=di),le},{e:void 0,t:void 0,a:void 0,o:void 0}),L(()=>De.checked=Z()==="google"),L(()=>Ne.checked=Z()==="indexeddb"),v}}),m),c(O,()=>o("footer.terms")),c(Y,()=>o("footer.privacy")),V(me,"href",Ko),c(me,()=>o("footer.feedback")),c(Le,()=>o("footer.description")),c(d,N(To,{get toasts(){return k()}}),null),L(v=>{var ie=$e("/terms.html"),se=$e("/privacy.html"),he=o("footer.github"),ce=o("footer.github");return ie!==v.e&&V(O,"href",v.e=ie),se!==v.t&&V(Y,"href",v.t=se),he!==v.a&&V(Ee,"aria-label",v.a=he),ce!==v.o&&V(Ee,"title",v.o=ce),v},{e:void 0,t:void 0,a:void 0,o:void 0}),d})()}St(["click"]);const Ss=document.querySelector("#app");if(!Ss)throw new Error("Missing #app container");Pa(()=>N(dr,{get children(){return N(ir,{path:"/*",component:nl})}}),Ss);hr({immediate:!0});
